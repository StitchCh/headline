webpackJsonp([126],{B9Ef:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=i("2get"),s=i("2Dnl"),o={name:"app-gallery-list",components:{Account:l.a,AfCenter:s.a},props:{id:String,channels:{type:Array,default:function(){return[]}}},data:function(){return{urlList:[],urlListShow:!1,ui:{qrcodeShow:!1}}},methods:{getLinkList:function(t){var e=this;this.$http.post("/cri-cms-platform/gallery/published.monitor",{id:t}).then(function(t){e.urlList=t,e.urlListShow=!0})},onItemClick:function(t,e){sessionStorage.setItem("viewScroll",85*e-100),this.$router.replace({path:"/gallery/list/"+t.id,query:this.$route.query})},copyGallery:function(){var t=this;this.$confirm({text:"您确定要复制该图集并重新发布吗？",color:"#e45000",no:function(){},yes:function(){t.$http.post("/cri-cms-platform//gallery/copy.monitor",{contentId:t.id}).then(function(e){t.$router.push({path:"/galleryEdit/gallery/"+e.id})})}})},deleteGallery:function(){var t=this;this.$confirm({title:"您确定要删除此图集吗？",text:"您可以从回收站中恢复。",btns:["取消","删除"],color:"red",yes:function(){t.$http.post("/cri-cms-platform/gallery/delete.monitor",{id:t.id}).then(function(e){t.$refs.afCenter.getList(),t.$router.replace({path:"/gallery/list",query:t.$route.query})})}})}}},a=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"flex flex-item gallery-list"},[l("af-center",{ref:"afCenter",attrs:{scope:t.$route.query.scope,status:t.$route.query.status,url:"/cri-cms-platform/gallery/list.monitor"},on:{add:function(e){t.openWindow("/GalleryAdd")},getListEnd:t.onItemClick},scopedSlots:t._u([{key:"default",fn:function(e){return l("div",{staticClass:"list-item flex-v-center a",class:{on:e.item.id==t.$route.params.id},on:{click:function(i){t.onItemClick(e.item,e.index)}}},[l("div",{staticClass:"list-thumb flex-center"},[e.item.thumb.length?l("img",{attrs:{src:e.item.thumb[0].url,alt:""}}):t._e()]),t._v(" "),l("div",{staticClass:"flex-item"},[l("div",{staticClass:"list-title flex-center"},[~~e.item.isRecommnd?l("i",{staticClass:"icon f-16 blue"},[t._v("thumb_up")]):t._e(),t._v(" "),~~e.item.isOriginal?l("i",{staticClass:"icon f-16 green"},[t._v("copyright")]):t._e(),t._v(" "),l("span",{staticClass:"flex-item c-6 f-14 b"},[t._v(t._s(e.item.title))])]),t._v(" "),l("div",{staticClass:"list-info f-12 c-8 flex-v-center"},[l("span",[t._v(t._s(e.item.createDate))]),t._v(" "),l("span",[t._v(t._s(e.item.createUser))])]),t._v(" "),l("div",{staticClass:"list-info f-12 c-8 flex-v-center"},[l("span",{staticClass:"list-info-num"},[l("i",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"阅读",expression:"'阅读'",arg:"top"}]},[t._v(t._s(e.item.pv))]),t._v("/"),l("i",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"评论",expression:"'评论'",arg:"top"}]},[t._v(t._s(e.item.commentCount))]),t._v("/"),l("i",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"分享",expression:"'分享'",arg:"top"}]},[t._v(t._s(e.item.shareCount))]),t._v("/"),l("i",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"点赞",expression:"'点赞'",arg:"top"}]},[t._v(t._s(e.item.diggCount))])]),t._v(" "),l("span",{staticClass:"flex-item"})])])])}}])}),t._v(" "),l("div",{staticClass:"flex-item flex-col"},[l("div",{staticClass:"af-topbar flex-v-center"},[t.$route.params.id?l("div",{staticClass:"content-tool flex-v-center"},[l("div",{staticClass:"tool-item"},[l("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom",value:"编辑",expression:"'编辑'",arg:"bottom"}],attrs:{small:""},on:{click:function(e){t.openWindow("/galleryEdit/gallery/"+t.id)}}},[t._v("edit")])],1),t._v(" "),l("div",{staticClass:"tool-item"},[l("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom",value:"删除",expression:"'删除'",arg:"bottom"}],attrs:{small:""},on:{click:t.deleteGallery}},[t._v("delete")])],1),t._v(" "),l("div",{staticClass:"tool-item relative"},[l("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom",value:"二维码",expression:"'二维码'",arg:"bottom"}],attrs:{small:""},on:{click:function(e){t.ui.qrcodeShow=!t.ui.qrcodeShow}}},[l("img",{staticClass:"qr-icon",attrs:{src:i("tnW0")}})]),t._v(" "),t.ui.qrcodeShow?l("bubble",{on:{close:function(e){t.ui.qrcodeShow=!1}}},[l("div",{staticStyle:{width:"200px",height:"200px"}},[l("img",{attrs:{src:t.qrcode(t.id)}})])]):t._e()],1),t._v(" "),l("div",{staticClass:"tool-item"},[l("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom",value:"复制并重新发布",expression:"'复制并重新发布'",arg:"bottom"}],attrs:{small:""},on:{click:t.copyGallery}},[t._v("file_copy")])],1),t._v(" "),l("div",{staticClass:"tool-item"},[l("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom",value:"链接",expression:"'链接'",arg:"bottom"}],attrs:{small:""},on:{click:function(e){t.getLinkList(t.id)}}},[t._v("link")])],1)]):t._e(),t._v(" "),l("div",{staticClass:"flex-item"}),t._v(" "),l("account")],1),t._v(" "),l("div",{staticClass:"flex-item flex-col"},[t.id?l("div",{staticClass:"flex-center",staticStyle:{height:"60px"}},[l("div",{staticClass:"tab"},[l("div",{staticClass:"tab-item",class:{on:"GalleryContent"===t.$route.name},on:{click:function(e){t.$router.replace({path:"/gallery/list/"+t.id,query:t.$route.query})}}},[t._v("内容")]),t._v(" "),l("div",{staticClass:"tab-item",class:{on:"GalleryStatistics"===t.$route.name},on:{click:function(e){t.$router.replace({path:"/gallery/list/"+t.id+"/statistics",query:t.$route.query})}}},[t._v("统计")]),t._v(" "),l("div",{staticClass:"tab-item",class:{on:"GalleryHistory"===t.$route.name},on:{click:function(e){t.$router.replace({path:"/gallery/list/"+t.id+"/history",query:t.$route.query})}}},[t._v("历史")])])]):t._e(),t._v(" "),l("router-view",{attrs:{channels:t.channels}})],1)]),t._v(" "),t.urlListShow?l("div",{staticClass:"urlList",on:{click:function(e){t.urlListShow=!1}}},[l("div",{staticClass:"urlList_box",on:{click:function(t){t.stopPropagation()}}},[t.urlList.length>0?l("ul",t._l(t.urlList,function(e,i){return l("li",{staticClass:"urlList_list"},[l("p",{staticClass:"newTitle"},[l("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(i+1)+".")]),t._v(t._s(e.newTitle))]),t._v(" "),l("p",{staticClass:"newUrl"},[t._v(t._s(e.url))])])})):t._e(),t._v(" "),t.urlList.length<=0?l("div",{staticStyle:{padding:"20px","text-align":"center","line-height":"340px"}},[t._v("\n        暂无数据\n      ")]):t._e()])]):t._e()],1)};a._withStripped=!0;var n={render:a,staticRenderFns:[]},r=n;var c=!1;var u=i("VU/8")(o,r,!1,function(t){c||i("sFBJ")},null,null);u.options.__file="src/apps/gallery/list/index.vue";e.default=u.exports},fjZt:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.gallery-list .list-item.on {\n  background: #FF8A65;\n  color: #fff;\n}\n.gallery-list .list-item.on .list-title span {\n  color: #fff;\n}\n.gallery-list .list-item.on .list-info {\n  color: rgba(255, 255, 255, 0.8);\n}\n.gallery-list .list-item.on .tg-icon {\n  color: rgba(255, 255, 255, 0.8);\n}\n.gallery-list .list-thumb {\n  width: 80px;\n  height: 60px;\n  background: rgba(0, 0, 0, 0.07);\n  margin-right: 10px;\n}\n.gallery-list .list-thumb img {\n  max-width: 100%;\n  max-height: 100%;\n}\n.gallery-list .active {\n  color: #018be6;\n}\n.gallery-list th,\n.gallery-list td {\n  padding: 5px 10px;\n  font-size: 14px;\n}\n.gallery-list tr {\n  border-top: 1px solid #e1e1e1;\n}\n.gallery-list tr:hover {\n  background: rgba(0, 0, 0, 0.07);\n}\n",""])},sFBJ:function(t,e,i){var l=i("fjZt");"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);i("rjj0")("15ff554a",l,!1,{})}});