webpackJsonp([115],{"/5i9":function(t,i,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.app-audio-album-edit .album-options {\n  width: 320px;\n  padding: 20px 0;\n  background: #f8f8f8;\n  -webkit-transition: width 0.3s;\n  transition: width 0.3s;\n}\n.app-audio-album-edit .album-options textarea,\n.app-audio-album-edit .album-options input {\n  border: none;\n  width: 100%;\n  outline: none;\n  font-size: 14px;\n  color: #444;\n  resize: none;\n  background: transparent;\n}\n.app-audio-album-edit .album-options textarea::-webkit-input-placeholder,\n.app-audio-album-edit .album-options input::-webkit-input-placeholder {\n  color: #999;\n}\n.app-audio-album-edit .option-item {\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n  padding: 12px 0;\n}\n.app-audio-album-edit .add-photo-btn {\n  background: rgba(0, 0, 0, 0.06);\n  border-radius: 5px;\n  overflow: hidden;\n}\n.app-audio-album-edit .add-other-icon {\n  margin-right: 10px;\n}\n.app-audio-album-edit .active {\n  color: #018be6;\n}\n.app-audio-album-edit .datepicker::before {\n  content: none;\n}\n.app-audio-album-edit .audio-album-editor {\n  max-width: 900px;\n  margin: 0 auto;\n  padding: 10px;\n}\n.app-audio-album-edit .audio-album-editor .title {\n  font-size: 30px;\n  font-weight: bold;\n  border: none;\n  width: 100%;\n  background: transparent;\n  padding: 20px 15px;\n  color: #555;\n}\n.app-audio-album-edit .audio-album-editor .title::-webkit-input-placeholder {\n  color: #aaa;\n}\n.app-audio-album-edit .audio-album-editor .selector {\n  width: 100%;\n  min-height: auto;\n}\n.app-audio-album-edit .audio-album-editor .selector .selector-add {\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.06);\n  border-radius: 10px;\n}\n.app-audio-album-edit .audio-album-editor .selector .selector-add:hover {\n  opacity: 0.8;\n}\n.app-audio-album-edit .audio-album-editor .list-item .list-thumb {\n  width: 100px;\n  height: 75px;\n  margin-right: 15px;\n}\n.app-audio-album-edit .audio-album-editor .list-item .list-thumb img {\n  max-width: 100%;\n  max-height: 100%;\n}\n.app-audio-album-edit .audio-album-editor .layer-ctn {\n  max-width: 1000px;\n}\n.app-audio-album-edit .audio-album-editor .layer-ctn .list-thumb {\n  width: 80px;\n  height: 60px;\n  background: rgba(0, 0, 0, 0.07);\n  margin-right: 10px;\n}\n.app-audio-album-edit .audio-album-editor .layer-ctn .list-thumb img {\n  max-width: 100%;\n  max-height: 100%;\n}\n.app-audio-album-edit .audio-album-editor .layer-ctn .item-check {\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: 2;\n  visibility: hidden;\n  color: rgba(173, 173, 173, 0.8);\n  padding: 3px;\n  color: #008eff;\n}\n.app-audio-album-edit .audio-album-editor .layer-ctn .check.item-check {\n  visibility: visible;\n}\n.app-audio-album-edit .audio-album-editor .list-item.on {\n  background: #42aad8;\n  color: #fff;\n}\n.app-audio-album-edit .audio-album-editor .list-item.on span {\n  color: rgba(255, 255, 255, 0.8);\n}\n",""])},"8IaI":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("qfV/"),n=e("XJqE"),o={name:"audio-album-edit",components:{ListView:a.a,AddThumb:n.a},props:["id"],data:function(){return{ui:{loading:!1,optionShow:!0,audioSelectorShow:!1},totalPage:1,filter:{appName:"AUDIO"},form:{title:"",videoAbstract:"",thumb:"",albumType:"audio",contentId:""},list:[],audioList:[],selected:[],thumb:null}},methods:{clearList:function(){this.ui.audioSelectorShow=!1,this.selected=this.audioList.map(function(t){return t})},getAlbum:function(){var t=this;this.ui.loading=!0,this.$http.post("/cri-cms-platform/audio/albumGet.monitor",{id:this.id}).then(function(i){t.form.title=i.album.title,t.form.videoAbstract=i.album.videoAbstract,t.form.thumb=i.album.thumb,t.thumb={id:"cache",url:i.album.thumb},t.selected=i.content;for(var e=0;e<i.content.length;e++)t.selected[e].thumb=JSON.parse(t.selected[e].thumb);t.audioList=t.selected.map(function(t){return t}),t.ui.loading=!1})},getList:function(t){var i=this;t&&(this.filter.toPage=1),this.$http.post("/cri-cms-platform/special/getArticList.monitor",this.filter).then(function(t){console.log(t),t.length&&t.forEach(function(t){t.check=i.selected.some(function(i){var e=i.contentLayoutId||i.id;return t.id===e})}),i.list=t||[];for(var e=0;e<i.list.length;e++)i.list[e].thumb&&(i.list[e].thumb=JSON.parse(i.list[e].thumb));i.totalPage=t.totalPage||1}).catch(function(t){console.log(t)})},onPrev:function(){var t=this.filter;1!==t.toPage&&(t.toPage=t.toPage<=1?1:t.toPage-1)},onNext:function(){var t=this.filter,i=this.totalPage;t.toPage!==i&&(t.toPage=t.toPage>=i?i:t.toPage+1)},onItemClick:function(t){if(t.check){t.check=!1;var i=this.selected.findIndex(function(i){return i.id===t.id});this.selected.splice(i,1)}else t.check=!0,this.selected.push(t)},selectVideo:function(){this.audioList=this.selected.map(function(t){return t}),this.ui.audioSelectorShow=!1},submit:function(){var t=this,i=this.id?"/cri-cms-platform/audio/albumUpdate.monitor":"/cri-cms-platform/audio/albumSave.monitor";this.form.title?this.thumb?(this.form.thumb=this.thumb.url,this.id?this.form.contentId=this.selected.map(function(t){return t.contentLayoutId||t.id}).join(","):this.form.contentId=this.selected.map(function(t){return t.id}).join(","),this.id&&(this.form.id=this.id),this.$http.post(i,this.form).then(function(i){var e="/audio/album";t.id&&(e+="/"+t.id),t.$router.replace(e)})):this.$toast("请选择封面"):this.$toast("请输入标题")}},created:function(){this.id&&this.getAlbum()}},s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"abs bg-f flex c-6 f-14 app-audio-album-edit"},[t.ui.loading?e("div",{staticClass:"abs flex-center bg-f",staticStyle:{"z-index":"10"}},[e("loading",{attrs:{size:"50"}})],1):[e("div",{staticClass:"flex-item flex-col"},[e("div",{staticClass:"top-bar flex-v-center",staticStyle:{height:"55px",padding:"0 20px"}},[e("div",{staticClass:"a flex-v-center",on:{click:function(i){t.$router.back()}}},[e("icon-btn",{staticStyle:{"margin-right":"10px"}},[t._v("arrow_back")]),t._v(" "),e("span",{staticClass:"f-18"},[t._v("返回")])],1),t._v(" "),e("div",{staticClass:"flex-item"}),t._v(" "),e("div",{staticClass:"flex-v-center"},[e("btn",{staticStyle:{"margin-right":"20px"},attrs:{big:""},on:{click:t.submit}},[t._v("保存")]),t._v(" "),e("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom",value:"发布选项",expression:"'发布选项'",arg:"bottom"}],on:{click:function(i){t.ui.optionShow=!t.ui.optionShow}}},[t._v("menu")])],1)]),t._v(" "),e("div",{staticClass:"flex-item scroll-y"},[e("div",{staticClass:"audio-album-editor"},[e("div",{staticClass:"relative"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"title",attrs:{type:"text",placeholder:"请输入标题"},domProps:{value:t.form.title},on:{input:function(i){i.target.composing||t.$set(t.form,"title",i.target.value)}}})]),t._v(" "),e("div",{staticClass:"selector"},[t.audioList.length?e("div",[e("ul",{staticClass:"list-view"},[t._l(t.audioList,function(i){return e("li",{key:i.id,staticClass:"list-item c-6 f-14 a flex-v-center"},[e("div",{staticClass:"list-thumb flex-center"},[i.thumb.length?e("img",{attrs:{src:i.thumb[0].url,alt:""}}):t._e()]),t._v(" "),e("div",{staticClass:"flex-item"},[e("div",{staticClass:"b",staticStyle:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[t._v(t._s(i.title))]),t._v(" "),e("div",{staticClass:"c-8 f-12",staticStyle:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","margin-top":"10px"}},[t._v(t._s(i.abstarcts))]),t._v(" "),e("div",{staticClass:"c-8 f-12 flex-v-center",staticStyle:{"margin-top":"10px"}},[e("span",{staticStyle:{"margin-right":"15px"}},[t._v("作者："+t._s(i.author))]),t._v(" "),e("span",{staticStyle:{"margin-right":"15px"}},[t._v("创建者："+t._s(i.createUser))]),t._v(" "),e("span",{staticClass:"flex-item"}),t._v(" "),e("span",[t._v(t._s(i.createDate))])])])])}),t._v(" "),e("li")],2),t._v(" "),e("div",{staticClass:"t-center",staticStyle:{"margin-top":"20px"}},[e("btn",{attrs:{flat:"",color:"#0299ff"},on:{click:function(i){t.ui.audioSelectorShow=!0,t.getList(!0)}}},[t._v("重新选择")])],1)]):e("div",{staticClass:"selector-add flex-center a",on:{click:function(i){t.ui.audioSelectorShow=!0,t.getList(!0)}}},[t._m(0)])]),t._v(" "),t.ui.audioSelectorShow?e("layer",{attrs:{title:"选择视频",width:"800px"}},[e("div",{staticClass:"layer-text flex-col",staticStyle:{height:"800px"}},[e("list-view",{staticClass:"flex-item",attrs:{list:t.list},scopedSlots:t._u([{key:"default",fn:function(i){return e("li",{staticClass:"list-item flex-v-center a relative",class:{on:i.item.check},on:{click:function(e){t.onItemClick(i.item,i.index)}}},[e("div",{staticClass:"list-thumb flex-center"},[i.item.thumb.length?e("img",{attrs:{src:i.item.thumb[0].url,alt:""}}):t._e()]),t._v(" "),e("div",{staticClass:"flex-item"},[e("div",{staticClass:"list-title flex-center"},[e("span",{staticClass:"flex-item c-6 f-14 b"},[t._v(t._s(i.item.title))])]),t._v(" "),e("div",{staticClass:"list-info f-12 c-8 flex-v-center"},[e("span",[t._v(t._s(i.item.abstracts))])]),t._v(" "),e("div",{staticClass:"list-info f-12 c-8 flex-v-center"},[e("span",[t._v(t._s(i.item.createDate))]),t._v(" "),e("span",[t._v(t._s(i.item.createUser))])])])])}}])})],1),t._v(" "),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:""},on:{click:t.clearList}},[t._v("取消")]),t._v(" "),e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.selectVideo}},[t._v("选择")])],1)]):t._e()],1)])]),t._v(" "),e("div",{staticClass:"album-options c-4 scroll-y",style:{width:t.ui.optionShow?"320px":"0px"}},[e("div",{staticStyle:{width:"280px",margin:"0 20px"}},[e("p",[t._v("添加封面")]),t._v(" "),e("add-thumb",{staticStyle:{"margin-bottom":"8px"},attrs:{scale:"",height:"160px"},model:{value:t.thumb,callback:function(i){t.thumb=i},expression:"thumb"}})],1)])]],2)};s._withStripped=!0;var l={render:s,staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"relative"},[i("i",{staticClass:"icon c-a",staticStyle:{"font-size":"80px"}},[this._v("audiotrack")]),this._v(" "),i("i",{staticClass:"icon c-a",staticStyle:{"font-size":"50px",position:"absolute",left:"-10px",top:"0"}},[this._v("add")])])}]},r=l;var c=!1;var d=e("VU/8")(o,r,!1,function(t){c||e("KDXU")},null,null);d.options.__file="src/apps/audios/album/edit.vue";i.default=d.exports},KDXU:function(t,i,e){var a=e("/5i9");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("68b8f438",a,!1,{})}});