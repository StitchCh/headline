webpackJsonp([138],{"70DM":function(t,i,e){var a=e("PD48");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("7b35b8f3",a,!1,{})},PD48:function(t,i,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.member_list .datepicker-popup {\n  width: 500px!important;\n  right: -50px;\n  left: auto;\n}\n",""])},pODa:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("WUXh"),s=e("PJh5"),o=e.n(s),n={name:"settings-member",components:{VueDatepickerLocal:a.a},data:function(){return{searchTime:[new Date,new Date],loading:!1,list:[],filter:{pageSize:15,toPage:1},total:1,detail:{},form:{id:"",nickname:"",address:""},detailShow:!1,editShow:!1,totalRowsAmount:""}},methods:{search:function(){var t=this;this.loading=!0,this.$http.post("/cri-cms-platform/member/list.monitor",{pageSize:15,toPage:1,startTime:o()(this.searchTime[0]).format("YYYY-MM-DD"),endTime:o()(this.searchTime[1]).format("YYYY-MM-DD")}).then(function(i){console.log(i),i.pages.forEach(function(t){t.stateShow=!1}),t.list=i.pages,t.totalRowsAmount=i.totalRowsAmount,t.total=15*i.totalPage,t.loading=!1}).catch(function(t){console.log(t)})},open:function(t){console.log(666),t.stateShow=!0},getList:function(){var t=this;this.loading=!0,this.$http.post("/cri-cms-platform/member/list.monitor",this.filter).then(function(i){console.log(i),i.pages.forEach(function(t){t.stateShow=!1}),t.list=i.pages,t.totalRowsAmount=i.totalRowsAmount,t.total=15*i.totalPage,t.loading=!1}).catch(function(t){console.log(t)})},openDetail:function(t){var i=this;this.$http.post("/cri-cms-platform/member/view.monitor",{id:t}).then(function(t){i.detail=t,i.detailShow=!0}).catch(console.log)},openEdit:function(t){this.form.id=t.id,this.form.nickname=t.nickname,this.form.address=t.address,this.editShow=!0},submitEdit:function(){var t=this;this.$http.post("/cri-cms-platform/member/update.monitor",this.form).then(function(){t.getList(),t.editShow=!1})},stateBoxOff:function(){this.list.forEach(function(t){t.stateShow=!1})},enable:function(t){var i=this;this.$http.post("/cri-cms-platform/member/enable.monitor",{id:t}).then(function(){i.getList()}).catch(console.log)},disable:function(t){var i=this;this.$http.post("/cri-cms-platform/member/disable.monitor",{id:t}).then(function(){i.getList()}).catch(console.log)}},filters:{state:function(t){if(!t)return t;return{1:"正常",0:"屏蔽"}[t]}},created:function(){this.getList()},mounted:function(){document.addEventListener("click",this.stateBoxOff)},beforeDestroy:function(){document.removeEventListener("click",this.stateBoxOff)}},r=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"member_list"},[t._m(0),t._v(" "),e("div",{staticClass:"flex-item scroll-y bg-e relative"},[e("transition",{attrs:{name:"fade"}},[t.loading?e("div",{staticClass:"abs bg-e",staticStyle:{"z-index":"99"}},[e("loading",{staticStyle:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"}})],1):t._e()]),t._v(" "),e("div",{staticClass:"setting-card f-14",staticStyle:{position:"relative"}},[e("div",{staticStyle:{"text-align":"right","margin-bottom":"20px"}},[e("vue-datepicker-local",{attrs:{format:"YYYY-MM-DD","show-buttons":""},model:{value:t.searchTime,callback:function(i){t.searchTime=i},expression:"searchTime"}}),t._v(" "),e("btn",{staticStyle:{"margin-left":"10px"},on:{click:t.search}},[t._v("搜索")])],1),t._v(" "),e("table",[t._m(1),t._v(" "),e("tbody",t._l(t.list,function(i,a){return e("tr",{key:i.id},[e("td",[t._v(t._s(a+1))]),t._v(" "),e("td",[t._v(t._s(i.nickname))]),t._v(" "),e("td",[t._v(t._s(i.mobile))]),t._v(" "),e("td",[t._v(t._s(i.email||"--"))]),t._v(" "),e("td",[i.province||i.city?e("span",[t._v(t._s(i.province||"")+t._s(i.province&&i.city?"-":"")+t._s(i.city||""))]):e("span",[t._v("--")])]),t._v(" "),e("td",[t._v(t._s(i.registTime))]),t._v(" "),e("td",[t._v(t._s(i.thisLoginTime))]),t._v(" "),e("td",[t._v(t._s(i.credits))]),t._v(" "),e("td",{staticClass:"relative"},[e("span",{staticClass:"a state",on:{click:function(t){t.stopPropagation(),i.stateShow=!i.stateShow}}},[t._v(t._s(t._f("state")(i.state))+" "),e("i",{staticClass:"icon",class:{active:i.stateShow}},[t._v("keyboard_arrow_down")])]),t._v(" "),i.stateShow?e("bubble",["0"===i.state?e("div",{staticClass:"a stateBox",on:{click:function(e){t.enable(i.id)}}},[t._v("正常")]):t._e(),t._v(" "),"1"===i.state?e("div",{staticClass:"a stateBox",on:{click:function(e){t.disable(i.id)}}},[t._v("屏蔽")]):t._e()]):t._e()],1),t._v(" "),e("td",{staticStyle:{width:"30px"}},[e("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"编辑",expression:"'编辑'"}],attrs:{small:""},on:{click:function(e){t.openEdit(i)}}},[t._v("edit")])],1),t._v(" "),e("td",{staticStyle:{width:"30px"}},[e("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"查看",expression:"'查看'"}],attrs:{small:""},on:{click:function(e){t.openDetail(i.id)}}},[t._v("info")])],1)])}))]),t._v(" "),e("div",{staticClass:"flex-center"},[e("pagination",{attrs:{page:t.filter.toPage,size:t.filter.pageSize,total:t.total},on:{change:function(i){t.filter.toPage=i,t.getList()}}})],1),t._v(" "),e("p",{staticStyle:{position:"absolute",right:"20px",bottom:"0px"}},[t._v("会员总数："+t._s(t.totalRowsAmount))])])],1),t._v(" "),t.detailShow?e("layer",{attrs:{title:"会员信息",width:"600px",maskClick:""},on:{close:function(i){t.detailShow=!1}}},[e("div",{staticClass:"layer-text"},[e("table",[e("tbody",[e("tr",[e("th",{attrs:{align:"right"}},[t._v("昵称")]),t._v(" "),e("td",[t._v(t._s(t.detail.member.nickname||"--"))])]),t._v(" "),e("tr",[e("th",{attrs:{align:"right"}},[t._v("真实姓名")]),t._v(" "),e("td",[t._v(t._s(t.detail.member.trueName||"--"))])]),t._v(" "),e("tr",[e("th",{attrs:{align:"right"}},[t._v("身份证号")]),t._v(" "),e("td",[t._v(t._s(t.detail.member.idNo||"--"))])]),t._v(" "),e("tr",[e("th",{attrs:{align:"right"}},[t._v("邮箱")]),t._v(" "),e("td",[t._v(t._s(t.detail.member.email||"--"))])]),t._v(" "),e("tr",[e("th",{attrs:{align:"right"}},[t._v("手机")]),t._v(" "),e("td",[t._v(t._s(t.detail.member.mobile||"--"))])]),t._v(" "),e("tr",[e("th",{attrs:{align:"right"}},[t._v("地址")]),t._v(" "),e("td",[t._v(t._s(t.detail.member.address||"--"))])]),t._v(" "),e("tr",[e("th",{attrs:{align:"right"}},[t._v("QQ昵称")]),t._v(" "),e("td",[t._v(t._s(t.detail.social.QQ||"--"))])]),t._v(" "),e("tr",[e("th",{attrs:{align:"right"}},[t._v("微信昵称")]),t._v(" "),e("td",[t._v(t._s(t.detail.social.WECHAT||"--"))])]),t._v(" "),e("tr",[e("th",{attrs:{align:"right"}},[t._v("新浪微博")]),t._v(" "),e("td",[t._v(t._s(t.detail.social.SINA_WEIBO||"--"))])]),t._v(" "),e("tr",[e("th",{attrs:{align:"right"}},[t._v("GOOGLE")]),t._v(" "),e("td",[t._v(t._s(t.detail.social.GOOGLE||"--"))])]),t._v(" "),e("tr",[e("th",{attrs:{align:"right"}},[t._v("FACEBOOK")]),t._v(" "),e("td",[t._v(t._s(t.detail.social.FACEBOOK||"--"))])]),t._v(" "),e("tr",[e("th",{attrs:{align:"right"}},[t._v("TWITER")]),t._v(" "),e("td",[t._v(t._s(t.detail.social.TWITER||"--"))])]),t._v(" "),e("tr",[e("th",{attrs:{align:"right"}},[t._v("所属站点")]),t._v(" "),e("td",[t._v(t._s(t.detail.site.name))])]),t._v(" "),e("tr",[e("th",{attrs:{align:"right"}},[t._v("站点域名")]),t._v(" "),e("td",[t._v(t._s(t.detail.site.url))])]),t._v(" "),e("tr",[e("th",{attrs:{align:"right"}},[t._v("创建时间")]),t._v(" "),e("td",[t._v(t._s(t.detail.member.registTime))])]),t._v(" "),e("tr",[e("th",{attrs:{align:"right"}},[t._v("注册IP")]),t._v(" "),e("td",[t._v(t._s(t.detail.member.registIp))])]),t._v(" "),e("tr",[e("th",{attrs:{align:"right"}},[t._v("最后一次登录时间")]),t._v(" "),e("td",[t._v(t._s(t.detail.member.thisLoginTime))])]),t._v(" "),e("tr",[e("th",{attrs:{align:"right"}},[t._v("最后一次登录IP")]),t._v(" "),e("td",[t._v(t._s(t.detail.member.thisLoginIp))])])])])]),t._v(" "),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008cff"},on:{click:function(i){t.detailShow=!1}}},[t._v("关闭")])],1)]):t._e(),t._v(" "),t.editShow?e("layer",{attrs:{title:"修改会员信息",width:"600px"}},[e("div",{staticClass:"layer-text"},[e("input-box",{attrs:{label:"昵称"},model:{value:t.form.nickname,callback:function(i){t.$set(t.form,"nickname",i)},expression:"form.nickname"}}),t._v(" "),e("input-box",{attrs:{label:"地址"},model:{value:t.form.address,callback:function(i){t.$set(t.form,"address",i)},expression:"form.address"}})],1),t._v(" "),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:""},on:{click:function(i){t.editShow=!1}}},[t._v("取消")]),t._v(" "),e("btn",{attrs:{flat:"",color:"#008cff"},on:{click:t.submitEdit}},[t._v("提交")])],1)]):t._e()],1)};r._withStripped=!0;var l={render:r,staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"af-topbar"},[i("span",{staticClass:"f-18"},[this._v("全部")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("thead",[e("th",[t._v("序号")]),t._v(" "),e("th",[t._v("昵称")]),t._v(" "),e("th",[t._v("手机")]),t._v(" "),e("th",[t._v("邮箱")]),t._v(" "),e("th",[t._v("区域")]),t._v(" "),e("th",[t._v("注册时间")]),t._v(" "),e("th",[t._v("最后登录")]),t._v(" "),e("th",[t._v("积分")]),t._v(" "),e("th",[t._v("状态")]),t._v(" "),e("th",{attrs:{colspan:"2"}},[t._v("操作")])])}]},c=l;var _=!1;var v=e("VU/8")(n,c,!1,function(t){_||e("70DM")},null,null);v.options.__file="src/apps/member/list/index.vue";i.default=v.exports}});