webpackJsonp([15],{"6IPw":function(t,e,i){var n=i("CMq3");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("282ca30d",n,!1,{})},CMq3:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.add-attachment .item {\n  padding: 3px;\n  border-radius: 2px;\n  margin-bottom: 4px;\n  line-height: 1.2em;\n}\n.add-attachment .item:hover {\n  background: rgba(0, 0, 0, 0.08);\n}\n.add-attachment .item .flex-item {\n  margin: 0 6px;\n  overflow: hidden;\n}\n.add-attachment .item .file-title {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 100%;\n  text-overflow: ellipsis;\n}\n.add-attachment .item .file-list {\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n}\n",""])},KaTp:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.app-article-add {\n  line-height: 1em;\n  /*.bubble-list{padding: 10px 0;*/\n  /*li{padding: 5px 15px;}*/\n  /*li:hover{background: #eee;}*/\n  /*}*/\n}\n.app-article-add .art-options {\n  width: 320px;\n  padding: 20px 0;\n  background: #f8f8f8;\n  -webkit-transition: width 0.3s;\n  transition: width 0.3s;\n}\n.app-article-add .art-options textarea,\n.app-article-add .art-options input {\n  border: none;\n  width: 100%;\n  outline: none;\n  font-size: 14px;\n  color: #444;\n  resize: none;\n  background: transparent;\n}\n.app-article-add .art-options textarea::-webkit-input-placeholder,\n.app-article-add .art-options input::-webkit-input-placeholder {\n  color: #999;\n}\n.app-article-add .option-item {\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n  padding: 12px 0;\n}\n.app-article-add .add-photo-btn {\n  background: rgba(0, 0, 0, 0.06);\n  border-radius: 5px;\n  overflow: hidden;\n}\n.app-article-add .add-other-icon {\n  margin-right: 10px;\n}\n.app-article-add .listhover:hover {\n  background: #eee;\n}\n.app-article-add .active {\n  color: #018be6;\n}\n.app-article-add .datepicker::before {\n  content: none;\n}\n.app-article-add .add-gallery-setting-btn:hover {\n  color: #008eff;\n}\n.app-article-add .add-gallery-setting {\n  padding: 0;\n}\n.app-article-add .add-gallery-setting li {\n  padding-left: 20px;\n  font-size: 16px;\n}\n.app-article-add .add-gallery-setting li div {\n  border-bottom: 1px solid #e1e1e1;\n  padding: 12px 0;\n}\n.app-article-add .add-gallery-setting li:last-child div {\n  border-bottom: 0;\n}\n.app-article-add .add-gallery-setting li input {\n  border: none;\n  outline: none;\n  font-size: 14px;\n  color: #444;\n  background: transparent;\n  height: 34px;\n  width: 60px;\n  text-align: right;\n  padding-right: 20px;\n}\n.app-article-add .add-gallery-setting li input::-webkit-input-placeholder {\n  color: #999;\n}\n",""])},LtgS:function(t,e,i){var n=i("WycD");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("0e3dc772",n,!1,{})},TgpZ:function(t,e,i){var n=i("KaTp");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("17bcac2a",n,!1,{})},WycD:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.app-article-add-thumb .layer-ctn {\n  max-width: 1000px;\n}\n.app-article-add-thumb .layer-ctn .af-left {\n  width: 280px;\n  background: #fff;\n  border-right: 1px solid rgba(0, 0, 0, 0.05);\n}\n.app-article-add-thumb .layer-ctn .nav-item {\n  height: 40px;\n  border-bottom: 1px solid #eee;\n  line-height: 1em;\n  padding: 0 5px 0 15px;\n}\n.app-article-add-thumb .layer-ctn .nav-item.nav-item-folder {\n  padding-left: 30px;\n}\n.app-article-add-thumb .layer-ctn .nav-item:hover {\n  background: rgba(0, 0, 0, 0.05);\n}\n.app-article-add-thumb .layer-ctn .nav-item.on {\n  background: #318fff;\n  border-color: #fff;\n  color: #fff;\n}\n.app-article-add-thumb .layer-ctn .nav-item.on .icon-btn {\n  color: #fff;\n}\n.app-article-add-thumb .layer-ctn .nav-item input {\n  border: none;\n  height: 36px;\n  background: transparent;\n}\n.app-article-add-thumb .layer-ctn .nav-item input::-webkit-input-placeholder {\n  color: #aaa;\n}\n.app-article-add-thumb .layer-ctn .nav-item .nav-item-icon {\n  margin-right: 15px;\n}\n.app-article-add-thumb .layer-ctn .search-bar input {\n  width: 150px;\n  height: 100%;\n  border: none;\n  margin-left: 10px;\n}\n.app-article-add-thumb .layer-ctn .media-group {\n  padding: 13px 30px;\n}\n.app-article-add-thumb .layer-ctn .media-group ul {\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n}\n.app-article-add-thumb .layer-ctn .media-group li {\n  margin: 0 6px 6px 0;\n}\n.app-article-add-thumb .layer-ctn .media-group-title {\n  padding: 15px 0;\n}\n.app-article-add-thumb .layer-ctn .media-group-title {\n  padding: 15px 0;\n}\n",""])},X2a5:function(t,e,i){var n=i("enGZ");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("4c8185fe",n,!1,{})},"Zcc+":function(t,e,i){var n=i("gO92");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("e1a91b0e",n,!1,{})},duta:function(t,e,i){var n=i("iXg1");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("cd4e05c4",n,!1,{})},enGZ:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.add-relates .item {\n  padding: 7px 4px;\n}\n.add-relates .item span {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.add-relates .item i:hover {\n  color: #F44336;\n}\n.add-relates .layer-ctn {\n  max-width: 1000px;\n}\n.add-relates .title {\n  margin: 10px 0;\n  font-size: 12px;\n}\n.add-relates .content {\n  background: #fff;\n  border-radius: 10px;\n  overflow: hidden;\n  margin-bottom: 10px;\n  max-height: 600px;\n  overflow-y: auto;\n}\n.add-relates .content li {\n  padding-left: 20px;\n  cursor: pointer;\n}\n.add-relates .content li div {\n  border-bottom: 1px solid #e1e1e1;\n  padding: 12px 0;\n}\n.add-relates .content li:hover {\n  background: #e1e1e1;\n}\n.add-relates .content li:last-child div {\n  border-bottom: 0;\n}\n.add-relates .content .none {\n  padding: 0;\n  cursor: default;\n}\n.add-relates .content .none:hover {\n  background: none;\n}\n",""])},"fZ/j":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("mvHQ"),a=i.n(n),o=i("Dd8w"),l=i.n(o),r=i("PJh5"),s=i.n(r),c=i("S07m"),d=i.n(c),m=i("O4Lo"),u=i.n(m),p=i("jelr"),h=i("4r9f"),f=i("jLa5"),v={name:"article-editor",components:{VueUeditorWrap:d.a,MediaPhotos:p.default,MediaVideos:h.default,MediaAudios:f.default},data:function(){return{ui:{imageSelectorShow:!1,videoSelectorShow:!1,audioSelectorShow:!1,index:0},title:"",titleColorBoxShow:!1,titleColor:"#000000",content:"",editor:null,config:{autoFloatEnabled:!1,zIndex:1,height:800,toolbars:[["fullscreen","autotypeset","|","source","undo","redo","|","formatmatch","removeformat","cleardoc","|","link","unlink","|","selectimage","imagenone","imageleft","imageright","|","selectvideo","|","selectaudio"],["paragraph","justifyleft","justifyright","justifycenter","justifyjustify","|","insertorderedlist","insertunorderedlist","|","indent","rowspacingtop","rowspacingbottom","lineheight","|","pagebreak","horizontal","|","fontsize","fontfamily","forecolor","backcolor","fontborder","bold","italic","underline","strikethrough","superscript","subscript","spechars"]],labelMap:{selectimage:"插入图片"},wordCount:!1,autoHeightEnabled:!0,initialFrameHeight:window.innerHeight-250,serverUrl:"/cri-cms-platform/media/uploadIAU.monitor",imageActionName:"/cri-cms-platform/media/uploadIAU.monitor"}}},methods:{titleChange:function(){var t=this;1002==sessionStorage.siteId&&this.$http.post("/cri-cms-platform/article/getKeyToTitle.monitor",{doc:this.title}).then(function(e){t.$emit("changeTitle",e.key.join(","))})},getText:function(){return this.editor.getContentTxt()},changeTitleColor:function(t){this.titleColor=t,this.titleColorBoxShow=!1},insertImage:function(){var t=this,e=this.$refs.mediaPhotos.selected.map(function(e){return{src:t.$refs.mediaPhotos.imgOrigin+e.filePath+e.fileName}});e.length&&this.editor.execCommand("insertimage",e),this.ui.imageSelectorShow=!1},insertVideo:function(){var t=this.$refs.mediaVideos.origin,e=this.$refs.mediaVideos.selected.map(function(e){return{url:t+e.video,thumb:t+e.thumb}});e.length&&this.editor.execCommand("insertvideo",e,"upload"),this.ui.videoSelectorShow=!1},insertAudio:function(){var t=this,e=this.$refs.mediaAudios.origin,i=this.$refs.mediaAudios.selected.map(function(t){return{url:e+t.audio}});console.log(i),i.length&&i.forEach(function(e){t.editor.execCommand("music",e,"upload",!0)}),this.ui.audioSelectorShow=!1},ready:function(t){var e=this;this.editor=t,window.UE.commands.selectimage={execCommand:function(){e.ui.imageSelectorShow=!0}},window.UE.commands.selectvideo={execCommand:function(){e.ui.videoSelectorShow=!0}},window.UE.commands.selectaudio={execCommand:function(){e.ui.audioSelectorShow=!0}},setTimeout(function(){e.editor.execCommand("lineheight",1001==sessionStorage.siteId?"2":"1.75"),e.editor.execCommand("justify",1001==sessionStorage.siteId?"justify":"left"),e.editor.execCommand("rowspacing","20","top"),e.editor.execCommand("rowspacing","20","bottom")},0)}},watch:{content:u()(function(){this.$emit("getKeyGenerate")},1e3)}},g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"article-editor"},[i("div",{staticClass:"relative"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"title title_title",style:{color:t.titleColor},attrs:{type:"text",placeholder:"请输入标题"},domProps:{value:t.title},on:{blur:t.titleChange,input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),i("div",{staticStyle:{position:"absolute",right:"20px",top:"28px"}},[i("button",{staticClass:"title-colorpicker-btn",style:{background:t.titleColor},on:{click:function(e){t.titleColorBoxShow=!t.titleColorBoxShow}}}),t._v(" "),t.titleColorBoxShow?i("bubble",{on:{close:function(e){t.titleColorBoxShow=!1}}},[i("div",{staticClass:"title-color-list"},[i("button",{staticClass:"title-colorpicker-btn",staticStyle:{background:"#000000"},on:{click:function(e){t.changeTitleColor("#000000")}}}),t._v(" "),i("button",{staticClass:"title-colorpicker-btn",staticStyle:{background:"#F44336"},on:{click:function(e){t.changeTitleColor("#F44336")}}}),t._v(" "),i("button",{staticClass:"title-colorpicker-btn",staticStyle:{background:"#FF9800"},on:{click:function(e){t.changeTitleColor("#FF9800")}}}),t._v(" "),i("button",{staticClass:"title-colorpicker-btn",staticStyle:{background:"#FFEB3B"},on:{click:function(e){t.changeTitleColor("#FFEB3B")}}}),t._v(" "),i("button",{staticClass:"title-colorpicker-btn",staticStyle:{background:"#4CAF50"},on:{click:function(e){t.changeTitleColor("#4CAF50")}}}),t._v(" "),i("button",{staticClass:"title-colorpicker-btn",staticStyle:{background:"#00BCD4"},on:{click:function(e){t.changeTitleColor("#00BCD4")}}}),t._v(" "),i("button",{staticClass:"title-colorpicker-btn",staticStyle:{background:"#2196F3"},on:{click:function(e){t.changeTitleColor("#2196F3")}}}),t._v(" "),i("button",{staticClass:"title-colorpicker-btn",staticStyle:{background:"#9C27B0"},on:{click:function(e){t.changeTitleColor("#9C27B0")}}})])]):t._e()],1)]),t._v(" "),i("div",[i("vue-ueditor-wrap",{ref:"editor",attrs:{config:t.config,destroy:!0},on:{ready:t.ready},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._v(" "),t.ui.imageSelectorShow?i("layer",{staticClass:"tc_box",attrs:{title:"选择图片",width:"800px"}},[i("div",{staticClass:"layer-text relative",staticStyle:{height:"800px"}},[i("media-photos",{ref:"mediaPhotos",attrs:{"select-mode":""}})],1),t._v(" "),i("div",{staticClass:"layer-btns"},[i("btn",{attrs:{flat:""},on:{click:function(e){t.ui.imageSelectorShow=!1}}},[t._v("取消")]),t._v(" "),i("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.insertImage}},[t._v("选择")])],1)]):t._e(),t._v(" "),t.ui.videoSelectorShow?i("layer",{staticClass:"tc_box",attrs:{title:"选择视频",width:"800px"}},[i("div",{staticClass:"layer-text relative",staticStyle:{height:"800px"}},[i("media-videos",{ref:"mediaVideos",attrs:{"select-mode":""}})],1),t._v(" "),i("div",{staticClass:"layer-btns"},[i("btn",{attrs:{flat:""},on:{click:function(e){t.ui.videoSelectorShow=!1}}},[t._v("取消")]),t._v(" "),i("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.insertVideo}},[t._v("选择")])],1)]):t._e(),t._v(" "),t.ui.audioSelectorShow?i("layer",{staticClass:"tc_box",attrs:{title:"选择音频",width:"800px"}},[i("div",{staticClass:"layer-text relative",staticStyle:{height:"800px"}},[i("media-audios",{ref:"mediaAudios",attrs:{"select-mode":""}})],1),t._v(" "),i("div",{staticClass:"layer-btns"},[i("btn",{attrs:{flat:""},on:{click:function(e){t.ui.audioSelectorShow=!1}}},[t._v("取消")]),t._v(" "),i("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.insertAudio}},[t._v("选择")])],1)]):t._e()],1)};g._withStripped=!0;var b={render:g,staticRenderFns:[]},x=b;var _=!1;var y=i("VU/8")(v,x,!1,function(t){_||i("duta")},null,null);y.options.__file="src/apps/article/editor.vue";var w=y.exports,C=i("WUXh"),k=i("obnb"),S=i("y/1I"),$={name:"app-article-add-comment",props:{value:{type:String,default:""}},data:function(){return{show:!1,form:{names:[],comments:[],displayMinutes:"30"},name:{show:!1,value:""},content:{show:!1,value:""}}},methods:{addCommentName:function(){this.name.value.replace(/\s/g,"")&&this.form.names.push(this.name.value),this.name.value="",this.name.show=!1},addCommentContent:function(){this.content.value.replace(/\s/g,"")&&this.form.comments.push(this.content.value),this.content.value="",this.content.show=!1}},created:function(){console.log(1,this.value),this.value&&(this.form=JSON.parse(this.value))},watch:{"form.names":function(){var t=a()(this.form);this.form.names.length&&this.form.comments.length||(t=""),this.$emit("input",t)},"form.comments":function(){var t=a()(this.form);this.form.names.length&&this.form.comments.length||(t=""),this.$emit("input",t)},"form.displayMinutes":function(){var t=a()(this.form);this.form.names.length&&this.form.comments.length||(t=""),this.$emit("input",t)}}},q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex-v-center",staticStyle:{"margin-top":"10px"}},[i("i",{staticClass:"icon f-20 c-8",staticStyle:{"margin-right":"10px"}},[t._v("comment")]),t._v(" "),i("span",{staticClass:"flex-item"},[t._v("已添加 "+t._s(t.form.comments.length)+" 条评论")]),t._v(" "),i("span",{staticClass:"blue a",on:{click:function(e){t.show=!0}}},[t._v("查看")]),t._v(" "),t.show?i("layer",{attrs:{title:"添加评论",width:"600px","mask-click":""},on:{close:function(e){t.show=!1}}},[i("div",{staticClass:"layer-text add-comment bg-e"},[i("div",{staticClass:"add-comment-setting"},[i("div",{staticClass:"title"},[t._v("设置")]),t._v(" "),i("ul",{staticClass:"content"},[i("li",{staticClass:"flex"},[i("div",[t._v("终端显示频率（分钟/条）")]),t._v(" "),i("div",{staticClass:"flex-item"}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.displayMinutes,expression:"form.displayMinutes"}],attrs:{type:"number",placeholder:"请输入"},domProps:{value:t.form.displayMinutes},on:{input:function(e){e.target.composing||t.$set(t.form,"displayMinutes",e.target.value)}}})])])]),t._v(" "),i("div",[i("div",{staticClass:"title"},[t._v("评论人")]),t._v(" "),i("ul",{staticClass:"content"},[t._l(t.form.names,function(e,n){return i("li",{key:n},[i("div",{staticClass:"flex"},[t._v("\n              "+t._s(e)+"\n              "),i("span",{staticClass:"flex-item"}),t._v(" "),i("span",{staticClass:"delete",on:{click:function(e){t.form.names.splice(n,1)}}},[t._v("删除")])])])}),t._v(" "),i("li",{staticClass:"add-comment-btn"},[t.name.show?i("input",{directives:[{name:"model",rawName:"v-model",value:t.name.value,expression:"name.value"}],ref:"addCommentName",attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.name.value},on:{blur:t.addCommentName,keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.$refs.addCommentName.blur()},input:function(e){e.target.composing||t.$set(t.name,"value",e.target.value)}}}):i("div",{on:{click:function(e){t.name.show=!0,t.$nextTick(function(){t.$refs.addCommentName.focus()})}}},[t._v("添加...")])])],2)]),t._v(" "),i("div",[i("div",{staticClass:"title"},[t._v("评论内容")]),t._v(" "),i("ul",{staticClass:"content"},[t._l(t.form.comments,function(e,n){return i("li",{key:n},[i("div",{staticClass:"flex"},[t._v("\n              "+t._s(e)+"\n              "),i("span",{staticClass:"flex-item"}),t._v(" "),i("span",{staticClass:"delete",on:{click:function(e){t.form.comments.splice(n,1)}}},[t._v("删除")])])])}),t._v(" "),i("li",{staticClass:"add-comment-btn"},[t.content.show?i("input",{directives:[{name:"model",rawName:"v-model",value:t.content.value,expression:"content.value"}],ref:"addCommentContent",attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.content.value},on:{blur:t.addCommentContent,keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.$refs.addCommentContent.blur()},input:function(e){e.target.composing||t.$set(t.content,"value",e.target.value)}}}):i("div",{on:{click:function(e){t.content.show=!0,t.$nextTick(function(){t.$refs.addCommentContent.focus()})}}},[t._v("添加...")])])],2)])])]):t._e()],1)};q._withStripped=!0;var T={render:q,staticRenderFns:[]},I=T;var P=!1;var D=i("VU/8")($,I,!1,function(t){P||i("Zcc+")},null,null);D.options.__file="src/apps/article/comment.vue";var L=D.exports,N={name:"app-article-add-relates",props:{value:{type:String,default:""},single:{type:Boolean,default:!1},channels:{type:Array,default:function(){return[]}},title:{type:String,default:""},icon:{type:String,default:""},url:{type:String,default:""}},data:function(){return{show:!1,loading:!0,list:{selected:[],unselected:[]},form:{selectedIds:"",title:"",channelId:""},channelShow:!1,channelIds:[]}},methods:{getList:function(){var t=this;return this.loading=!0,this.$http.post(this.url,this.form).then(function(e){t.list=e||{},t.loading=!1}).catch(function(t){console.log(t)})},searchTitle:function(){""!==this.form.title&&this.getList()},select:function(t){if(this.single)return this.list.selected.splice(0,1,this.list.unselected.splice(t,1)[0]),this.form.selectedIds=this.list.selected[0].id,void this.getList();10!==this.list.selected.length?(this.list.selected.push(this.list.unselected.splice(t,1)[0]),this.form.selectedIds=this.list.selected.map(function(t){return t.id}).join(",")):this.$emit("最多可添加10条")},remove:function(t){this.list.selected.splice(t,1),this.form.selectedIds=this.list.selected.map(function(t){return t.id}).join(","),this.getList()}},created:function(){this.form.selectedIds=this.value,this.getList()},watch:{"form.selectedIds":function(){this.$emit("input",this.form.selectedIds)},channelIds:function(t){this.form.channelId=t.join(","),this.getList()}}},F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"option-item add-relates"},[i("div",{staticClass:"flex-v-center blue a",on:{click:function(e){t.show=!0}}},[i("i",{staticClass:"icon f-20 add-other-icon"},[t._v(t._s(t.icon))]),t._v(" "),i("span",{staticClass:"flex-item"},[t._v("添加"+t._s(t.title))]),t._v(" "),t._t("afterTitle")],2),t._v(" "),t.list.selected.length?i("ul",{staticStyle:{"margin-top":"10px"}},t._l(t.list.selected,function(e,n){return i("li",{key:e.id,staticClass:"flex-v-center item",attrs:{title:e.title}},[i("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(e.title))]),t._v(" "),i("span",{staticClass:"flex-item"}),t._v(" "),i("i",{staticClass:"icon a",staticStyle:{"font-size":"18px"},on:{click:function(e){t.remove(n)}}},[t._v("delete")])])})):t._e(),t._v(" "),t._t("default"),t._v(" "),t.show?i("layer",{attrs:{title:"添加"+t.title,width:"800px","mask-click":""},on:{close:function(e){t.show=!1}}},[i("div",{staticClass:"layer-text bg-e relative"},[i("transition",{attrs:{name:"fade"}},[t.loading?i("div",{staticClass:"flex-center abs bg-e",staticStyle:{"z-index":"10"}},[i("loading")],1):t._e()]),t._v(" "),i("div",{staticClass:"flex-v-center"},[i("input-box",{ref:"searchTitle",attrs:{label:"搜索标题"},on:{blur:t.searchTitle},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.$refs.searchTitle.$refs.input.blur()}},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),t._v(" "),i("div",{staticClass:"relative"},[i("span",{staticClass:"a",staticStyle:{color:"rgba(0 ,0 ,0, .4)"},on:{click:function(e){t.channelShow=!t.channelShow}}},[t._v("筛选频道"),i("i",{staticClass:"icon"},[t._v("keyboard_arrow_down")])]),t._v(" "),t.channelShow?i("bubble",{on:{close:function(e){t.channelShow=!1}}},[i("div",{staticStyle:{padding:"10px 0",width:"280px"}},[i("tree",{attrs:{data:t.channels,"pid-txt":"channelPartentId",nameTxt:"channelName","show-checkbox":"","checked-list":t.channelIds},on:{"update:checkedList":function(e){t.channelIds=e}}})],1)]):t._e()],1)],1),t._v(" "),i("div",{staticClass:"flex"},[i("div",{staticClass:"flex-item",staticStyle:{"margin-right":"10px","flex-grow":"1"}},[i("div",{staticClass:"title"},[t._v("点击选取")]),t._v(" "),i("ul",{staticClass:"content"},[t.list.unselected.length?t._e():i("li",{staticClass:"flex-center none"},[i("no-data")],1),t._v(" "),t._l(t.list.unselected,function(e,n){return i("li",{key:e.id,on:{click:function(e){t.select(n)}}},[i("div",[t._v(t._s(e.title))])])})],2)]),t._v(" "),i("div",{staticClass:"flex-item",staticStyle:{"flex-grow":"1"}},[i("div",{staticClass:"title"},[t._v("已选取")]),t._v(" "),i("ul",{staticClass:"content"},[t.list.selected.length?t._e():i("li",{staticClass:"flex-center none"},[i("no-data")],1),t._v(" "),t._l(t.list.selected,function(e,n){return i("li",{key:e.id,on:{click:function(e){t.remove(n)}}},[i("div",[t._v(t._s(e.title))])])})],2)])])],1)]):t._e()],2)};F._withStripped=!0;var M={render:F,staticRenderFns:[]},j=M;var z=!1;var A=i("VU/8")(N,j,!1,function(t){z||i("X2a5")},null,null);A.options.__file="src/apps/article/relates.vue";var E=A.exports,O=i("c/Tr"),U=i.n(O),H=i("Zrlr"),W=i.n(H),B={name:"app-article-add-attachment",props:{value:{type:String,default:""},defaultList:Array},data:function(){return{list:[],uploadList:[]}},methods:{uploadFile:function(t){var e=this;U()(t.target.files).forEach(function(t){var i=new function t(e){W()(this,t),this.id=e.lastModified,this.alias=e.name,this.size=e.size,this.status="uploading",this.progress=0,this.source=null}(t);i.source=e.$http.CancelToken.source(),e.uploadList.push(i),e.$http.post("/cri-cms-platform/article/upload/attachment.monitor",{file:t},{onUploadProgress:function(t){t.lengthComputable&&(i.progress=t.loaded/t.total*100)},cancelToken:i.source.token}).then(function(t){i.status="done",e.uploadList.splice(e.uploadList.findIndex(function(t){return t===i}),1),e.list.push(t[0])}).catch(function(t){console.log(t),e.uploadList.splice(e.uploadList.findIndex(function(t){return t===i}),1),e.$toast(t.msg||t.message||"上传失败")})})},removeFile:function(t){var e=this.list;this.$confirm({title:"您确定要删除该文件吗？",text:"文件删除后将无法恢复。",btns:["取消","删除"],color:"red",yes:function(){e.splice(t,1)}})}},created:function(){this.defaultList&&(this.list=JSON.parse(a()(this.defaultList)))},watch:{list:function(t){this.$emit("input",t.map(function(t){return t.id}).join(","))}}},R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"option-item add-attachment"},[i("div",{staticClass:"flex-v-center blue a"},[i("i",{staticClass:"icon f-20 add-other-icon"},[t._v("attach_file")]),t._v(" "),i("span",{staticClass:"flex-item",on:{click:function(e){t.$refs.input.click()}}},[t._v("添加附件")]),t._v(" "),i("input",{ref:"input",staticStyle:{display:"none"},attrs:{type:"file",multiple:""},on:{change:t.uploadFile}})]),t._v(" "),t.list.length||t.uploadList.length?i("ul",{staticStyle:{"margin-top":"10px"}},[t._l(t.list,function(e,n){return i("li",{key:e.id,staticClass:"flex-v-center item relative"},[t._m(0,!0),t._v(" "),i("div",{staticClass:"flex-item",attrs:{title:e.alias}},[i("div",{staticClass:"f-12 file-title"},[t._v(t._s(e.alias))]),t._v(" "),i("div",{staticClass:"c-a f-12"},[t._v(t._s(t._f("filesize")(e.size)))])]),t._v(" "),i("a",{attrs:{href:e.url,download:e.alias,target:"_blank"}},[i("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"下载",expression:"'下载'",arg:"top"}],attrs:{small:""}},[t._v("file_download")])],1),t._v(" "),i("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"删除",expression:"'删除'",arg:"top"}],attrs:{small:""},on:{click:function(e){t.removeFile(n)}}},[t._v("delete")])],1)}),t._v(" "),t._l(t.uploadList,function(e){return i("li",{key:e.id,staticClass:"flex-v-center item relative"},[t._m(1,!0),t._v(" "),i("div",{staticClass:"flex-item",attrs:{title:e.alias}},[i("div",{staticClass:"f-12 file-title"},[t._v(t._s(e.alias))]),t._v(" "),i("div",{staticClass:"c-a f-12"},[t._v(t._s(t._f("filesize")(e.size)))]),t._v(" "),"uploading"===e.status?i("div",{staticStyle:{height:"2px",background:"#4CAF50",transition:"width .3s"},style:{width:e.progress+"%"}}):t._e()]),t._v(" "),i("div",{staticStyle:{width:"40px",height:"30px","font-size":"12px","line-height":"30px"}},[t._v(t._s(Math.round(e.progress))+"%")]),t._v(" "),i("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"删除",expression:"'删除'",arg:"top"}],attrs:{small:""},on:{click:function(t){e.source.cancel("取消上传")}}},[t._v("delete")])],1)})],2):t._e()])};R._withStripped=!0;var V={render:R,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"file-thumb flex-center"},[e("i",{staticClass:"icon",staticStyle:{color:"#888"}},[this._v("insert_drive_file")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"file-thumb flex-center"},[e("i",{staticClass:"icon",staticStyle:{color:"#888"}},[this._v("insert_drive_file")])])}]},Z=V;var K=!1;var Y=i("VU/8")(B,Z,!1,function(t){K||i("6IPw")},null,null);Y.options.__file="src/apps/article/attachment.vue";var G=Y.exports,J=i("nW/E"),X={name:"app-article-add-thumb",components:{MediaPhotos:p.default,MediaPreview:J.a},props:{scale:{type:Boolean,default:!1},value:{type:Object,default:null},width:{type:String,default:""},height:{type:String,default:""}},data:function(){return{show:!1,image:{id:"",url:""},preview:{show:!1,list:[],index:0}}},methods:{refresh:function(t){this.$refs.mediaPhotos.getList("",t),this.preview.show=!1},onDelected:function(t){this.$refs.mediaPhotos.getList()},selectImage:function(){var t=this.$refs.mediaPhotos.selected[0]||null;if(this.scale&&(console.log(t.scale==sessionStorage.imageratio),t.scale!=sessionStorage.imageratio))return this.$toast("请选择比例为"+sessionStorage.imageratio+"的图片"),!1;this.image={id:t?t.id:"",url:t?this.$refs.mediaPhotos.imgOrigin+t.filePath+t.fileName:""},this.$emit("input",t?this.image:t),this.show=!1},onPreview:function(t){this.preview.list=t.list||[],this.preview.index=t.index||0,this.preview.show=!0}},created:function(){this.value&&(this.image=JSON.parse(a()(this.value)))}},Q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-article-add-thumb tc_box"},[i("div",{staticClass:"add-photo-btn a flex-center",style:{width:t.width,height:t.height},on:{click:function(e){t.show=!0}}},[t.image.id?i("img",{attrs:{src:t.image.url,width:"100%",alt:""}}):i("i",{staticClass:"icon f-32 c-a"},[t._v("add_photo_alternate")])]),t._v(" "),t.show?i("layer",{attrs:{title:"选择图片",width:"1000px"}},[i("div",{staticClass:"layer-text relative",staticStyle:{height:"800px"}},[i("media-photos",{ref:"mediaPhotos",attrs:{"select-mode":"","single-select":""},on:{preview:t.onPreview}})],1),t._v(" "),i("div",{staticClass:"layer-btns"},[i("btn",{attrs:{flat:""},on:{click:function(e){t.show=!1}}},[t._v("取消")]),t._v(" "),i("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.selectImage}},[t._v("选择")])],1)]):t._e(),t._v(" "),t.preview.show?i("media-preview",{attrs:{list:t.preview.list,index:t.preview.index,type:t.$route.meta.type},on:{close:function(e){t.preview.show=!1},refresh:t.refresh,delected:t.onDelected}}):t._e()],1)};Q._withStripped=!0;var tt={render:Q,staticRenderFns:[]},et=tt;var it=!1;var nt=i("VU/8")(X,et,!1,function(t){it||i("LtgS")},null,null);nt.options.__file="src/apps/article/thumb.vue";var at=nt.exports,ot={article:{getUrl:"/cri-cms-platform/article/get.monitor"},draft:{getUrl:"/cri-cms-platform/articleAutoSave/getAuto.monitor"}},lt={name:"app-article-add",components:{ArticleEditor:w,VueDatepickerLocal:C.a,SelectCard:k.a,SelectCardOption:S.a,AppArticleAddComment:L,AppArticleAddRelates:E,AppArticleAddAttachment:G,AppArticleAddThumb:at},props:["from","id"],data:function(){return{scaleshow:!1,scaleIndex:0,article:null,ui:{loading:!1,optionShow:!0,channelShow:!1,channels:[],gallerySettingShow:!1,gallerySettingDisplayPositionShow:!1,submited:!1},getend:!1,form:{app:"ARTICLE",title:"",hasThumb:0,titleColor:"",content:"",channelIds:"",galleryId:"",gallerySettingMaxWidth:"640",gallerySettingMinHeight:"480",gallerySettingThumbWidth:"80",gallerySettingThumbHeight:"60",gallerySettingDisplayPosition:"1",relateIds:"",specialId:"",isOpenComment:1,isOriginal:0,originalFrom:"",originalUrl:"",isRecommnd:0,abstarcts:"",keywords:"",author:this.$store.state.account.authorList[0],isWatermarked:0,virtualPv:"",virtualComment:"",virtualShare:"",virtualDigg:"",thumbType:1,thumb:"",attachmentIds:"",isListShowPic:1},thumb:{thumb1:null,thumb2:null,thumb3:null},attachmentDefaultList:[],addCommentShow:!1,autoSaveId:"",autoSaveTimer:null}},computed:{channelIds:{get:function(){return""===this.form.channelIds?[]:this.form.channelIds.split(",")},set:function(t){this.form.channelIds=t.join(",")}},channelNames:function(){var t=this;return this.channelIds.length?this.channelIds.map(function(e){return t.ui.channels.find(function(t){return t.id===e}).channelName}).join("，"):"选择栏目"}},methods:{beforeClose:function(){if(this.ui.submited)return clearInterval(this.autoSaveTimer),window.opener=null,void window.close();var t=this;this.$confirm({title:"您确定要离开吗？",text:"未保存的内容将无法恢复。",btns:["取消","离开"],color:"red",yes:function(){clearInterval(t.autoSaveTimer),window.opener=null,window.close()},no:function(){}})},getChannels:function(){var t=this;this.$http.post("/cri-cms-platform/article/getChannels.monitor").then(function(e){t.ui.channels=e||[],t.getend=!0}).catch(function(t){console.log(t)})},getKeyGenerate:function(){var t=this;if(!this.from&&!this.id){var e=this.$refs.editor.getText();e.trim()&&(1002==sessionStorage.siteId?this.form.abstarcts=e.split(".")[0].substring(0,128):this.$http.post("/cri-cms-platform/article/getKeyGenerate.monitor",{doc:e}).then(function(e){t.form.abstarcts=e.gerenate,t.form.keywords=e.key.join(",")}))}},autoSave:function(){var t=this,e=this.$refs.editor,i=e.title,n=e.titleColor,a=e.content;this.form.title=i,this.form.titleColor=n,this.form.content=a;var o=l()({},this.form);return this.autoSaveId&&(o.id=this.autoSaveId),this.$http.post("/cri-cms-platform/articleAutoSave/saveAuto.monitor",o).then(function(e){t.autoSaveId=e.autoSaveId,t.$toast("保存成功")}).catch(function(e){t.$toast(e.msg||e||"保存失败")})},submit:function(){var t=this,e=this.id&&"article"===this.from?"/cri-cms-platform/article/update.monitor":"/cri-cms-platform/article/save.monitor",i=this.$refs.editor,n=i.title,a=i.titleColor,o=i.content;i.getText;if(n)if(o)if(this.form.channelIds)if(this.form.thumb){this.form.title=n,this.form.titleColor=a,this.form.content=o;var r=l()({},this.form);r.isListShowPic=1==r.isListShowPic?0:1,r.createDate&&(r.createDate=s()(r.createDate).format("YYYY-MM-DD HH:mm:ss")),this.id&&(r.id=this.id),2==this.form.thumbType&&(r.thumb=this.thumb.thumb1.id+","+this.thumb.thumb2.id+","+this.thumb.thumb3.id),this.$http.post(e,r).then(function(e){t.ui.submited=!0,window.opener.location.reload(),window.opener=null,window.close()}).catch(function(e){t.$toast(e||e.msg||"保存失败"),console.log(e)})}else this.$toast("请选头图");else this.$toast("请选择栏目");else this.$toast("请输入内容");else this.$toast("请输入标题")}},filters:{gallerySettingDisplayPosition:function(t){return"1"===t?"正文正上方":"2"===t?"正文正下方":void 0}},created:function(){var t=this;this.getChannels(),this.autoSaveTimer=setInterval(function(){t.autoSave()},6e4)},mounted:function(){var t=this;this.from&&this.id?(this.ui.loading=!0,"draft"===this.from&&(this.autoSaveId=this.id),this.$http.post(ot[this.from].getUrl,{app:"ARTICLE",id:this.id}).then(function(e){for(var i in t.form)"virtualComment"!==i?("thumb"===i&&(t.thumb.thumb1=e.content.thumb[0],t.thumb.thumb2=e.content.thumb[1],t.thumb.thumb3=e.content.thumb[2]),t.form[i]="isDelete"!==i&&"isOpenComment"!==i&&"isOriginal"!==i&&"isRecommnd"!==i&&"isWatermarked"!==i&&"terminalApp"!==i&&"terminalPc"!==i&&"terminalWeb"!==i&&"hasThumb"!==i&&"isListShowPic"!==i?e.content[i]:Number(e.content[i])):""===e.content[i]?t.form[i]="":t.form[i]=a()(e.content[i]);t.form.isListShowPic=1==t.form.isListShowPic?0:1,t.form.createDate=e.content.createDate,t.form.content=e.article.content,t.form.channelIds=e.channelIds||"",t.form.relateIds=e.relateArticle.map(function(t){return t.id}).join(","),t.form.specialId=e.relateSpecial.id||"",t.attachmentDefaultList=e.attachments,t.form.gallerySettingDisplayPosition=e.gallerySettingDisplayPosition||"1",t.form.gallerySettingMaxWidth=e.gallerySettingMaxWidth||"640",t.form.gallerySettingMinHeight=e.gallerySettingMinHeight||"480",t.form.gallerySettingThumbHeight=e.gallerySettingThumbHeight||"80",t.form.gallerySettingThumbWidth=e.gallerySettingThumbWidth||"60",t.ui.loading=!1,t.$nextTick(function(){t.$refs.editor.title=t.form.title,t.$refs.editor.titleColor=t.form.titleColor,t.$refs.editor.content=t.form.content})}).catch(function(t){console.log(t)})):(this.form.virtualPv=500+parseInt(300*Math.random()),this.form.virtualShare=5+parseInt(5*Math.random()),this.form.virtualDigg=5+parseInt(5*Math.random()))},watch:{"thumb.thumb1":function(t){2===this.form.thumbType?t||this.thumb.thumb2||this.thumb.thumb3?this.form.thumb=[t,this.thumb.thumb2,this.thumb.thumb3].filter(function(t){return t}).map(function(t){return t.id}).join(","):this.form.thumb="":this.form.thumb=t?t.id:""},"thumb.thumb2":function(t){this.thumb.thumb1||t||this.thumb.thumb3?this.form.thumb=[this.thumb.thumb1,t,this.thumb.thumb3].filter(function(t){return t}).map(function(t){return t.id}).join(","):this.form.thumb=""},"thumb.thumb3":function(t){this.thumb.thumb1||this.thumb.thumb2||t?this.form.thumb=[this.thumb.thumb1,this.thumb.thumb2,t].filter(function(t){return t}).map(function(t){return t.id}).join(","):this.form.thumb=""},"form.thumbType":function(t){2===t?this.thumb.thumb1||this.thumb.thumb2||this.thumb.thumb3?this.form.thumb=[this.thumb.thumb1,this.thumb.thumb2,this.thumb.thumb3].filter(function(t){return t}).map(function(t){return t.id}).join(","):this.form.thumb="":this.thumb.thumb1?this.form.thumb=this.thumb.thumb1.id:this.form.thumb=""}}},rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"abs bg-f flex c-6 f-14 app-article-add"},[t.ui.loading?i("div",{staticClass:"abs flex-center bg-light-rgb-5",staticStyle:{"z-index":"10"}},[i("loading",{attrs:{size:"50"}})],1):[i("div",{staticClass:"flex-item flex-col"},[i("div",{staticClass:"top-bar flex-v-center",staticStyle:{height:"55px",padding:"0 20px"}},[i("div",{staticClass:"a flex-v-center",on:{click:t.beforeClose}},[i("icon-btn",{staticStyle:{"margin-right":"10px"}},[t._v("arrow_back")]),t._v(" "),i("span",{staticClass:"f-18"},[t._v("返回")])],1),t._v(" "),i("div",{staticClass:"flex-item"}),t._v(" "),i("div",{staticClass:"flex-v-center"},[i("btn",{staticStyle:{"margin-right":"10px"},attrs:{big:"",flat:""},on:{click:t.autoSave}},[t._v("保存草稿")]),t._v(" "),i("btn",{staticStyle:{"margin-right":"20px"},attrs:{big:""},on:{click:t.submit}},[t._v("保存")]),t._v(" "),i("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom",value:"发布选项",expression:"'发布选项'",arg:"bottom"}],on:{click:function(e){t.ui.optionShow=!t.ui.optionShow}}},[t._v("menu")])],1)]),t._v(" "),i("div",{staticClass:"flex-item scroll-y"},[i("article-editor",{ref:"editor",on:{getKeyGenerate:t.getKeyGenerate,changeTitle:function(e){t.form.keywords=e}}})],1)]),t._v(" "),i("div",{staticClass:"art-options c-4 scroll-y",style:{width:t.ui.optionShow?"320px":"0px"}},[i("div",{staticStyle:{width:"280px",margin:"0 20px"}},[t.getend?i("div",{staticClass:"option-item flex-v-center relative a",on:{click:function(e){t.ui.channelShow=!t.ui.channelShow}}},[i("span",{staticClass:"flex-item"},[t._v(t._s(t.channelNames))]),t._v(" "),i("i",{staticClass:"icon f-20 c-a"},[t._v("keyboard_arrow_down")]),t._v(" "),t.ui.channelShow?i("bubble",{attrs:{pos:"bottom",align:"center"},on:{close:function(e){t.ui.channelShow=!1}}},[i("div",{staticStyle:{padding:"10px 0",width:"280px"}},[i("tree",{attrs:{data:t.ui.channels,"pid-txt":"channelPartentId",nameTxt:"channelName","show-checkbox":"","checked-list":t.channelIds},on:{"update:checkedList":function(e){t.channelIds=e}}})],1)]):t._e()],1):t._e(),t._v(" "),i("div",{staticClass:"option-item flex-v-center"},[i("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"推荐",expression:"'推荐'",arg:"top"}],class:{active:t.form.isRecommnd},attrs:{small:""},on:{click:function(e){t.form.isRecommnd=~~!t.form.isRecommnd}}},[t._v("thumb_up")]),t._v(" "),i("span",{staticClass:"flex-item"})],1),t._v(" "),i("div",{staticStyle:{margin:"10px 0"}},[i("app-article-add-thumb",{staticStyle:{"margin-bottom":"8px"},attrs:{scale:"",height:"160px"},model:{value:t.thumb.thumb1,callback:function(e){t.$set(t.thumb,"thumb1",e)},expression:"thumb.thumb1"}}),t._v(" "),2==t.form.thumbType?i("div",{staticClass:"flex"},[i("app-article-add-thumb",{staticClass:"flex-item",staticStyle:{"margin-right":"8px"},attrs:{scale:"",height:"80px"},model:{value:t.thumb.thumb2,callback:function(e){t.$set(t.thumb,"thumb2",e)},expression:"thumb.thumb2"}}),t._v(" "),i("app-article-add-thumb",{staticClass:"flex-item",attrs:{scale:"",height:"80px"},model:{value:t.thumb.thumb3,callback:function(e){t.$set(t.thumb,"thumb3",e)},expression:"thumb.thumb3"}})],1):t._e(),t._v(" "),i("div",{staticClass:"flex-v-center",staticStyle:{padding:"10px 5px 0 5px"}},[i("div",{staticClass:"flex-item"},[i("radio-box",{attrs:{text:"默认",label:1},model:{value:t.form.thumbType,callback:function(e){t.$set(t.form,"thumbType",e)},expression:"form.thumbType"}})],1),t._v(" "),i("div",{staticClass:"flex-item"},[i("radio-box",{attrs:{text:"三图",label:2},model:{value:t.form.thumbType,callback:function(e){t.$set(t.form,"thumbType",e)},expression:"form.thumbType"}})],1),t._v(" "),i("div",[i("radio-box",{staticStyle:{margin:"0"},attrs:{text:"16:10 大图",label:3},model:{value:t.form.thumbType,callback:function(e){t.$set(t.form,"thumbType",e)},expression:"form.thumbType"}})],1)])],1),t._v(" "),i("div",{staticClass:"option-item"},[i("div",{staticClass:"flex-v-center"},[i("span",{staticClass:"flex-item"},[t._v("显示头图")]),t._v(" "),i("switcher",{attrs:{mode:"Number"},model:{value:t.form.hasThumb,callback:function(e){t.$set(t.form,"hasThumb",e)},expression:"form.hasThumb"}})],1)]),t._v(" "),i("div",{staticClass:"option-item"},[i("div",{staticClass:"flex-v-center"},[i("span",{staticClass:"flex-item"},[t._v("列表中是否显示图片")]),t._v(" "),i("switcher",{attrs:{mode:"Number"},model:{value:t.form.isListShowPic,callback:function(e){t.$set(t.form,"isListShowPic",e)},expression:"form.isListShowPic"}})],1)]),t._v(" "),i("div",{staticClass:"option-item relative"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.abstarcts,expression:"form.abstarcts"}],attrs:{placeholder:"摘要，限制 128 字。",rows:"8"},domProps:{value:t.form.abstarcts},on:{input:function(e){e.target.composing||t.$set(t.form,"abstarcts",e.target.value)}}}),t._v(" "),i("span",{staticStyle:{position:"absolute",bottom:"3px",right:"0"},style:{color:t.form.abstarcts.length>128?"#F44336":"#999"}},[t._v(t._s(t.form.abstarcts.length)+" / 128")])]),t._v(" "),i("div",{staticClass:"option-item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.keywords,expression:"form.keywords"}],attrs:{type:"text",placeholder:"关键词，逗号分隔。"},domProps:{value:t.form.keywords},on:{input:function(e){e.target.composing||t.$set(t.form,"keywords",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"option-item flex-v-center"},[i("span",{staticClass:"flex-item"},[t._v("©原创声明")]),t._v(" "),i("switcher",{attrs:{mode:"Number"},model:{value:t.form.isOriginal,callback:function(e){t.$set(t.form,"isOriginal",e)},expression:"form.isOriginal"}})],1),t._v(" "),t.form.isOriginal?t._e():i("div",{staticClass:"option-item flex"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.originalFrom,expression:"form.originalFrom"}],staticClass:"flex-item",attrs:{type:"text",placeholder:"来源名称"},domProps:{value:t.form.originalFrom},on:{input:function(e){e.target.composing||t.$set(t.form,"originalFrom",e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.originalUrl,expression:"form.originalUrl"}],staticClass:"flex-item",attrs:{type:"text",placeholder:"来源URL"},domProps:{value:t.form.originalUrl},on:{input:function(e){e.target.composing||t.$set(t.form,"originalUrl",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"option-item",staticStyle:{display:"flex"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.author,expression:"form.author"}],staticStyle:{width:"calc(100% - 70px)"},attrs:{type:"text",placeholder:"作者，逗号分隔"},domProps:{value:t.form.author},on:{input:function(e){e.target.composing||t.$set(t.form,"author",e.target.value)}}}),t._v(" "),i("div",{staticClass:"relative",staticStyle:{padding:"0 4px",width:"70px"}},[i("p",{staticStyle:{cursor:"pointer","text-align":"right",margin:"0"},on:{click:function(e){t.scaleshow=!0}}},[t._v("\n            选择预设\n          ")]),t._v(" "),t.scaleshow?i("bubble",{staticStyle:{left:"-80px"},on:{close:function(e){t.scaleshow=!1}}},[i("ul",{staticClass:"f-14 c-5",staticStyle:{padding:"4px 0",width:"150px","text-align":"center","line-height":"24px"}},t._l(t.$store.state.account.authorList,function(e,n){return i("li",{staticClass:"a flex-v-center listhover",on:{click:function(i){t.form.author=e,t.scaleshow=!1}}},[i("span",{staticClass:"flex-item"},[t._v(t._s(e))])])}))]):t._e()],1)]),t._v(" "),void 0!==t.form.createDate?i("div",{staticClass:"option-item flex-v-center"},[i("div",{staticClass:"flex-item"},[t._v("创建时间")]),t._v(" "),i("div",{staticClass:"relative flex-v-center a"},[t.form.createDate?t._e():i("span",{staticClass:"flex-v-center",staticStyle:{position:"absolute",right:"0"}},[i("span",[t._v("设置")]),t._v(" "),i("i",{staticClass:"icon f-18 c-a"},[t._v("keyboard_arrow_down")])]),t._v(" "),i("vue-datepicker-local",{attrs:{"show-buttons":"",clearable:!1,format:"YYYY-MM-DD HH:mm:ss"},model:{value:t.form.createDate,callback:function(e){t.$set(t.form,"createDate",e)},expression:"form.createDate"}})],1)]):t._e(),t._v(" "),i("div",{staticClass:"option-item flex-v-center"},[i("span",[t._v("初始阅读量")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.virtualPv,expression:"form.virtualPv"}],staticClass:"flex-item t-right",attrs:{type:"number",placeholder:"请输入"},domProps:{value:t.form.virtualPv},on:{input:function(e){e.target.composing||t.$set(t.form,"virtualPv",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"option-item flex-v-center"},[i("span",[t._v("初始分享量")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.virtualShare,expression:"form.virtualShare"}],staticClass:"flex-item t-right",attrs:{type:"number",placeholder:"请输入"},domProps:{value:t.form.virtualShare},on:{input:function(e){e.target.composing||t.$set(t.form,"virtualShare",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"option-item flex-v-center"},[i("span",[t._v("初始点赞量")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.virtualDigg,expression:"form.virtualDigg"}],staticClass:"flex-item t-right",attrs:{type:"number",placeholder:"请输入"},domProps:{value:t.form.virtualDigg},on:{input:function(e){e.target.composing||t.$set(t.form,"virtualDigg",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"option-item"},[i("div",{staticClass:"flex-v-center"},[i("span",{staticClass:"flex-item"},[t._v("开启评论")]),t._v(" "),i("switcher",{attrs:{mode:"Number"},model:{value:t.form.isOpenComment,callback:function(e){t.$set(t.form,"isOpenComment",e)},expression:"form.isOpenComment"}})],1),t._v(" "),t.form.isOpenComment?i("app-article-add-comment",{model:{value:t.form.virtualComment,callback:function(e){t.$set(t.form,"virtualComment",e)},expression:"form.virtualComment"}}):t._e()],1),t._v(" "),i("app-article-add-relates",{attrs:{single:"",channels:t.ui.channels,title:"相关图集",icon:"collections",url:"/cri-cms-platform/article/associate/gallery.monitor"},model:{value:t.form.galleryId,callback:function(e){t.$set(t.form,"galleryId",e)},expression:"form.galleryId"}},[i("template",{slot:"afterTitle"},[i("span",{staticClass:"flex-item"}),t._v(" "),i("i",{staticClass:"add-gallery-setting-btn icon c-8",on:{click:function(e){e.stopPropagation(),t.ui.gallerySettingShow=!0}}},[t._v("settings")])]),t._v(" "),t.ui.gallerySettingShow?i("layer",{attrs:{title:"图集设置",width:"800px","mask-click":""},on:{close:function(e){t.ui.gallerySettingShow=!1}}},[i("div",{staticClass:"layer-text add-gallery-setting"},[i("ul",[i("li",[i("div",{staticClass:"flex-v-center"},[t._v("组图最大宽度 "),i("span",{staticClass:"flex-item"}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.gallerySettingMaxWidth,expression:"form.gallerySettingMaxWidth"}],attrs:{type:"number",placeholder:"请输入"},domProps:{value:t.form.gallerySettingMaxWidth},on:{input:function(e){e.target.composing||t.$set(t.form,"gallerySettingMaxWidth",e.target.value)}}})])]),t._v(" "),i("li",[i("div",{staticClass:"flex-v-center"},[t._v("组图最小高度 "),i("span",{staticClass:"flex-item"}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.gallerySettingMinHeight,expression:"form.gallerySettingMinHeight"}],attrs:{type:"number",placeholder:"请输入"},domProps:{value:t.form.gallerySettingMinHeight},on:{input:function(e){e.target.composing||t.$set(t.form,"gallerySettingMinHeight",e.target.value)}}})])]),t._v(" "),i("li",[i("div",{staticClass:"flex-v-center"},[t._v("缩略图宽度 "),i("span",{staticClass:"flex-item"}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.gallerySettingThumbWidth,expression:"form.gallerySettingThumbWidth"}],attrs:{type:"number",placeholder:"请输入"},domProps:{value:t.form.gallerySettingThumbWidth},on:{input:function(e){e.target.composing||t.$set(t.form,"gallerySettingThumbWidth",e.target.value)}}})])]),t._v(" "),i("li",[i("div",{staticClass:"flex-v-center"},[t._v("缩略图高度 "),i("span",{staticClass:"flex-item"}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.gallerySettingThumbHeight,expression:"form.gallerySettingThumbHeight"}],attrs:{type:"number",placeholder:"请输入"},domProps:{value:t.form.gallerySettingThumbHeight},on:{input:function(e){e.target.composing||t.$set(t.form,"gallerySettingThumbHeight",e.target.value)}}})])]),t._v(" "),i("li",[i("div",{staticClass:"flex-v-center"},[t._v("显示位置 "),i("span",{staticClass:"flex-item"}),i("span",{staticClass:"a",on:{click:function(e){t.ui.gallerySettingDisplayPositionShow=!0}}},[t._v(t._s(t._f("gallerySettingDisplayPosition")(t.form.gallerySettingDisplayPosition))),i("i",{staticClass:"icon"},[t._v("keyboard_arrow_right")])])])])])]),t._v(" "),t.ui.gallerySettingDisplayPositionShow?i("select-card",{attrs:{value:t.form.gallerySettingDisplayPosition,title:"显示位置",width:"600px",maskClick:""},on:{close:function(e){t.ui.gallerySettingDisplayPositionShow=!1}}},[i("select-card-option",{attrs:{value:"1"},on:{click:function(e){t.form.gallerySettingDisplayPosition="1",t.ui.gallerySettingDisplayPositionShow=!1}}},[t._v("正文正上方")]),t._v(" "),i("select-card-option",{attrs:{value:"2"},on:{click:function(e){t.form.gallerySettingDisplayPosition="2",t.ui.gallerySettingDisplayPositionShow=!1}}},[t._v("正文正下方")])],1):t._e()],1):t._e()],2),t._v(" "),i("app-article-add-relates",{attrs:{channels:t.ui.channels,title:"相关阅读",icon:"book",url:"/cri-cms-platform/article/associate/article.monitor"},model:{value:t.form.relateIds,callback:function(e){t.$set(t.form,"relateIds",e)},expression:"form.relateIds"}}),t._v(" "),i("app-article-add-relates",{attrs:{single:"",channels:t.ui.channels,title:"相关专题",icon:"assignment",url:"/cri-cms-platform/article/associate/special.monitor"},model:{value:t.form.specialId,callback:function(e){t.$set(t.form,"specialId",e)},expression:"form.specialId"}})],1)])]],2)};rt._withStripped=!0;var st={render:rt,staticRenderFns:[]},ct=st;var dt=!1;var mt=i("VU/8")(lt,ct,!1,function(t){dt||i("TgpZ")},null,null);mt.options.__file="src/apps/article/add.vue";e.default=mt.exports},gO92:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.add-comment .title {\n  margin: 10px 0;\n  font-size: 12px;\n}\n.add-comment .content {\n  background: #fff;\n  border-radius: 10px;\n  overflow: hidden;\n  margin-bottom: 10px;\n}\n.add-comment .content li {\n  padding-left: 20px;\n}\n.add-comment .content li div {\n  border-bottom: 1px solid #e1e1e1;\n  padding: 10px 0;\n}\n.add-comment .content li.add-comment-btn {\n  color: #008cff;\n  cursor: pointer;\n  -webkit-transition: background 0.2s;\n  transition: background 0.2s;\n}\n.add-comment .content li.add-comment-btn div {\n  border-bottom: 0;\n}\n.add-comment .content li.add-comment-btn:active {\n  background: #e1e1e1;\n}\n.add-comment .content li .delete {\n  color: #008cff;\n  cursor: pointer;\n  margin-right: 20px;\n}\n.add-comment .add-comment-setting .content li div {\n  border-bottom: 0;\n}\n.add-comment .add-comment-setting input {\n  width: 60px;\n  text-align: right;\n  padding-right: 20px;\n}\n.add-comment input {\n  border: none;\n  outline: none;\n  font-size: 14px;\n  color: #444;\n  background: transparent;\n  height: 34px;\n  width: 100%;\n}\n.add-comment input::-webkit-input-placeholder {\n  color: #999;\n}\n",""])},iXg1:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.article-editor {\n  max-width: 900px;\n  margin: 0 auto;\n  padding: 10px;\n  /*.ql-toolbar.ql-snow, .ql-container.ql-snow{border: none;}*/\n  /*.ql-toolbar.ql-snow{position: sticky;top: 0;border-top: 1px solid #ddd;background: #fff;z-index: 10;}*/\n  /*.ql-editor{font-size: 14px;color: #555;min-height: 200px;}*/\n  /*.ql-formats svg{vertical-align: top;}*/\n  /*.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"1\"]::before, .ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"1\"]::before{content: '一级标题'}*/\n  /*.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"2\"]::before, .ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"2\"]::before{content: '二级标题'}*/\n  /*.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"3\"]::before, .ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"3\"]::before{content: '三级标题'}*/\n  /*.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"4\"]::before, .ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"4\"]::before{content: '四级标题'}*/\n  /*.ql-snow .ql-picker.ql-header .ql-picker-label::before, .ql-snow .ql-picker.ql-header .ql-picker-item::before{content: '正文'}*/\n  /*.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=huge]::before, .ql-snow .ql-picker.ql-size .ql-picker-item[data-value=huge]::before{content: '超大'}*/\n  /*.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=large]::before, .ql-snow .ql-picker.ql-size .ql-picker-item[data-value=large]::before{content: '大号'}*/\n  /*.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=small]::before, .ql-snow .ql-picker.ql-size .ql-picker-item[data-value=small]::before{content: '小号'}*/\n  /*.ql-snow .ql-picker.ql-size .ql-picker-label::before, .ql-snow .ql-picker.ql-size .ql-picker-item::before{content: '正常'}*/\n  /*.ql-snow .ql-tooltip::before{content: '链接地址'}*/\n  /*.ql-snow .ql-tooltip a.ql-action::after{content: '修改'}*/\n  /*.ql-snow .ql-tooltip a.ql-remove::before{content: '删除'}*/\n  /*.ql-tooltip{border-radius: 6px;}*/\n}\n.article-editor .title {\n  outline: none;\n  resize: none;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  margin-bottom: 10px;\n}\n.article-editor .flex-v-center {\n  font-size: 14px !important;\n}\n.article-editor .title {\n  font-size: 30px;\n  font-weight: bold;\n  border: none;\n  width: 100%;\n  background: transparent;\n  padding: 20px 15px;\n  color: #555;\n  padding-right: 30px;\n}\n.article-editor .title::-webkit-input-placeholder {\n  color: #aaa;\n}\n.article-editor .title-colorpicker-btn {\n  width: 25px;\n  height: 25px;\n  border: 1px solid transparent;\n  margin: 3px;\n}\n.article-editor .title-colorpicker-btn:hover {\n  border: 1px solid #000000;\n}\n.article-editor .title-color-list {\n  width: 192px;\n  padding: 10px;\n}\n.article-editor .edui-for-selectimage .edui-icon {\n  background-position: -380px 0 !important;\n}\n.article-editor .edui-for-selectvideo .edui-icon {\n  background-position: -320px -20px !important;\n}\n.article-editor .edui-for-selectaudio .edui-icon {\n  background-position: -18px -40px !important;\n}\n.article-editor .layer-ctn {\n  max-width: 1000px;\n}\n.article-editor .layer-ctn .af-left {\n  width: 280px;\n  background: #fff;\n  border-right: 1px solid rgba(0, 0, 0, 0.05);\n}\n.article-editor .layer-ctn .nav-item {\n  height: 40px;\n  border-bottom: 1px solid #eee;\n  line-height: 1em;\n  padding: 0 5px 0 15px;\n}\n.article-editor .layer-ctn .nav-item.nav-item-folder {\n  padding-left: 30px;\n}\n.article-editor .layer-ctn .nav-item:hover {\n  background: rgba(0, 0, 0, 0.05);\n}\n.article-editor .layer-ctn .nav-item.on {\n  background: #318fff;\n  border-color: #fff;\n  color: #fff;\n}\n.article-editor .layer-ctn .nav-item.on .icon-btn {\n  color: #fff;\n}\n.article-editor .layer-ctn .nav-item input {\n  border: none;\n  height: 36px;\n  background: transparent;\n}\n.article-editor .layer-ctn .nav-item input::-webkit-input-placeholder {\n  color: #aaa;\n}\n.article-editor .layer-ctn .nav-item .nav-item-icon {\n  margin-right: 15px;\n}\n.article-editor .layer-ctn .search-bar input {\n  width: 150px;\n  height: 100%;\n  border: none;\n  margin-left: 10px;\n}\n.article-editor .layer-ctn .media-group {\n  padding: 13px 30px;\n}\n.article-editor .layer-ctn .media-group ul {\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n}\n.article-editor .layer-ctn .media-group li {\n  margin: 0 6px 6px 0;\n}\n.article-editor .layer-ctn .media-group-title {\n  padding: 15px 0;\n}\n.article-editor .layer-ctn .media-group-title {\n  padding: 15px 0;\n}\n.article-editor .layer-ctn .bubble-item {\n  padding: 4px 15px;\n  white-space: nowrap;\n  cursor: pointer;\n}\n.article-editor .layer-ctn .bubble-item:hover {\n  background: rgba(0, 0, 0, 0.1);\n}\n.article-editor .layer-ctn .datepicker:before {\n  content: none;\n}\n.article-editor .layer-ctn .datepicker input {\n  background: transparent;\n  border: none;\n  padding: 0 10px;\n}\n.article-editor .layer-ctn .datepicker-range {\n  min-width: 200px;\n}\n.article-editor .layer-ctn .datepicker-range .datepicker-popup {\n  right: 0;\n  width: 420px;\n}\n",""])}});