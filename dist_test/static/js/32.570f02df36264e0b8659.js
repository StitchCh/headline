webpackJsonp([32],{"9z83":function(t,e,i){var a=i("eSnv");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("909efdfc",a,!1,{})},ETcs:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("mvHQ"),n=i.n(a),o=i("obnb"),s=i("y/1I"),l=i("jelr"),r=i("nW/E"),c={name:"app-article-add-thumb",components:{MediaPhotos:l.default,MediaPreview:r.a},props:{scale:{type:Boolean,default:!1},value:{type:Object,default:null},width:{type:String,default:""},height:{type:String,default:""}},data:function(){return{show:!1,image:{id:"",url:""},preview:{show:!1,list:[],index:0}}},methods:{onDelected:function(t){this.$refs.mediaPhotos.getList()},selectImage:function(){var t=this.$refs.mediaPhotos.selected[0]||null;if(this.scale&&t.scale!=sessionStorage.imageratio)return this.$toast("请选择比例为"+sessionStorage.imageratio+"的图片"),!1;this.image={id:t?t.id:"",url:t?this.$refs.mediaPhotos.imgOrigin+t.filePath+t.fileName:""},this.$emit("input",t?this.image:t),this.show=!1,this.$emit("setMobileDispatch")},onPreview:function(t){this.preview.list=t.list||[],this.preview.index=t.index||0,this.preview.show=!0}},created:function(){this.value&&(this.image=JSON.parse(n()(this.value)))}},p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-article-add-thumb"},[i("div",{staticClass:"add-photo-btn a flex-center",style:{width:t.width,height:t.height},on:{click:function(e){t.show=!0}}},[t.image.url?i("img",{staticStyle:{height:"100%"},attrs:{src:t.image.url,alt:""}}):i("i",{staticClass:"icon f-32 c-a"},[t._v("add_photo_alternate")])]),t._v(" "),t.show?i("layer",{attrs:{title:"选择图片",width:"1000px"}},[i("div",{staticClass:"layer-text relative",staticStyle:{height:"800px"}},[i("media-photos",{ref:"mediaPhotos",attrs:{"select-mode":"","single-select":""},on:{preview:t.onPreview}})],1),t._v(" "),i("div",{staticClass:"layer-btns"},[i("btn",{attrs:{flat:""},on:{click:function(e){t.show=!1}}},[t._v("取消")]),t._v(" "),i("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.selectImage}},[t._v("选择")])],1)]):t._e(),t._v(" "),t.preview.show?i("media-preview",{attrs:{list:t.preview.list,index:t.preview.index,type:t.$route.meta.type},on:{close:function(e){t.preview.show=!1},refresh:function(e){t.$refs.mediaPhotos.getList(),t.preview.show=!1},delected:t.onDelected}}):t._e()],1)};p._withStripped=!0;var d={render:p,staticRenderFns:[]},u=d;var m=!1;var h=i("VU/8")(c,u,!1,function(t){m||i("pt6W")},null,null);h.options.__file="src/apps/settings/common/thumb.vue";var v=h.exports,f={name:"settings-common",components:{SelectCard:o.a,SelectCardOption:s.a,AppArticleAddThumb:v},data:function(){return{loading:!0,list:[],item:{},watermark:null,watermarkid:null,styleShow:!1,imageratioShow:!1,sharemodelShow:!1,titlemaxShow:!1,watermarkShow:!1}},methods:{setMobileDispatch:function(t){var e=this;console.log(t);var i=n()(t.value);this.$http.post("/cri-cms-platform/site/setting/update.monitor",{app:t.app,key:t.key,value:i,explain:t.explain}).then(function(t){}).catch(function(t){e.getList(),e.$toast(t.msg?t.msg:"修改失败")})},updateImg:function(t){var e=this,i=t.target.files[0],a=new FileReader;a.readAsDataURL(i),a.onloadend=function(){e.watermark=this.result,e.$http.post("/cri-cms-platform/site/setting/uploadWaterMarkPic.monitor",{id:e.watermarkid,file:i}).then(function(t){console.log(t),e.$store.commit("setWaterImg",t[0].waterMarkPath)})}},getList:function(){var t=this;this.loading=!0;var e=sessionStorage.siteId||localStorage.siteId;this.$http.post("/cri-cms-platform/site/setting/index.monitor",{siteId:e}).then(function(e){console.log(e);for(var i=0;i<e.length;i++){var a=Number(e[i].value);e[i].value=isNaN(a)?e[i].value:a,"watermark_path"==e[i].key&&(t.watermarkid=e[i].id,1!=e[i].value&&(t.watermark=e[i].value)),"watermark"==e[i].key&&(t.watermarkShow=1==e[i].value),"mobileDispatch"==e[i].key&&(e[i].value=JSON.parse(e[i].value))}t.list=e,console.log(e),t.loading=!1})},switcherShow:function(t){return"style"!==t&&("imageratio"!==t&&("sharemodel"!==t&&"titlemax"!==t))},openSettingBox:function(t){this.item=t,this[t.key+"Show"]=!0},switchValue:function(t,e,i,a){var n=this,o={app:t,key:e,value:i};this.$http.post("/cri-cms-platform/site/setting/update.monitor",o).then(function(t){a&&(n[e+"Show"]=!1),"watermark"==e&&(n.watermarkShow=!n.watermarkShow)}).catch(function(t){n.getList(),n.$toast(t.msg?t.msg:"修改失败")})},switchOption:function(t,e){t.value=e,this.switchValue(t.app,t.key,t.value,!0)}},filters:{style:function(t){return"red"===t?"红色":"blue"===t?"蓝色":t},sharemodel:function(t){return"logo"===t?"显示logo":"image"===t?"显示缩略图":t}},created:function(){this.getList()}},g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"settings-common flex-col c-6"},[t._m(0),t._v(" "),i("div",{staticClass:"flex-item scroll-y content relative"},[i("transition",{attrs:{name:"fade"}},[t.loading?i("div",{staticClass:"abs bg-e",staticStyle:{"z-index":"10"}},[i("loading",{staticStyle:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"}})],1):t._e()]),t._v(" "),t.loading?t._e():i("div",{staticClass:"setting-card"},[i("ul",[t._l(t.list,function(e){return"watermark_path"!=e.key?i("li",{key:e.id},["mobileDispatch"!=e.key?i("div",{staticClass:"flex"},[i("span",[t._v(t._s(e.explain))]),t._v(" "),i("div",{staticClass:"flex-item"}),t._v(" "),t.switcherShow(e.key)?i("switcher",{attrs:{mode:"Number"},on:{change:function(i){t.switchValue(e.app,e.key,e.value)}},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}}):i("span",{staticClass:"flex-v-center",staticStyle:{"line-height":"25px",cursor:"pointer"},on:{click:function(i){t.openSettingBox(e)}}},[t._v(t._s(t._f("sharemodel")(t._f("style")(e.value)))),i("i",{staticClass:"icon"},[t._v("keyboard_arrow_right")])])],1):t._e(),t._v(" "),"mobileDispatch"==e.key?i("div",[i("span",[t._v(t._s(e.explain))]),t._v(" "),i("div",{staticClass:"flex",staticStyle:{"justify-content":"center","align-items":"center"}},[i("app-article-add-thumb",{staticStyle:{"margin-bottom":"8px"},attrs:{scale:"",height:"160px"},on:{setMobileDispatch:function(i){t.setMobileDispatch(e)}},model:{value:e.value[0],callback:function(i){t.$set(e.value,0,i)},expression:"item.value[0]"}})],1)]):t._e()]):t._e()}),t._v(" "),t.watermarkShow?i("li",[i("p",[t._v("选择水印图片")]),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("label",[t.watermark?t._e():i("i",{staticClass:"icon c-a",staticStyle:{"font-size":"50px"}},[t._v("add_photo_alternate")]),t._v(" "),t.watermark?i("img",{staticStyle:{width:"100px"},attrs:{src:t.watermark,alt:""}}):t._e(),t._v(" "),i("input",{ref:"fileimg",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:function(e){t.updateImg(e)}}})])])]):t._e()],2)])],1),t._v(" "),t.styleShow?i("select-card",{attrs:{value:t.item.value,title:"风格设置",width:"600px",maskClick:""},on:{close:function(e){t.styleShow=!1}}},[i("select-card-option",{attrs:{value:"red"},on:{click:function(e){t.switchOption(t.item,"red")}}},[t._v("红色")]),t._v(" "),i("select-card-option",{attrs:{value:"blue"},on:{click:function(e){t.switchOption(t.item,"blue")}}},[t._v("蓝色")])],1):t._e(),t._v(" "),t.imageratioShow?i("select-card",{attrs:{value:t.item.value,title:"图片尺寸",width:"600px",maskClick:""},on:{close:function(e){t.imageratioShow=!1}}},[i("select-card-option",{attrs:{value:"16:10"},on:{click:function(e){t.switchOption(t.item,"16:10")}}},[t._v("16:10")]),t._v(" "),i("select-card-option",{attrs:{value:"4:3"},on:{click:function(e){t.switchOption(t.item,"4:3")}}},[t._v("4:3")]),t._v(" "),i("select-card-option",{attrs:{value:"1:1"},on:{click:function(e){t.switchOption(t.item,"1:1")}}},[t._v("1:1")])],1):t._e(),t._v(" "),t.sharemodelShow?i("select-card",{attrs:{value:t.item.value,title:"分享显示形式",width:"600px",maskClick:""},on:{close:function(e){t.sharemodelShow=!1}}},[i("select-card-option",{attrs:{value:"logo"},on:{click:function(e){t.switchOption(t.item,"logo")}}},[t._v("显示Logo")]),t._v(" "),i("select-card-option",{attrs:{value:"image"},on:{click:function(e){t.switchOption(t.item,"image")}}},[t._v("显示缩略图")])],1):t._e(),t._v(" "),t.titlemaxShow?i("select-card",{attrs:{value:t.item.value,title:"标题最多行数",width:"600px",maskClick:""},on:{close:function(e){t.titlemaxShow=!1}}},[i("select-card-option",{attrs:{value:2},on:{click:function(e){t.switchOption(t.item,2)}}},[t._v("2")]),t._v(" "),i("select-card-option",{attrs:{value:3},on:{click:function(e){t.switchOption(t.item,3)}}},[t._v("3")]),t._v(" "),i("select-card-option",{attrs:{value:4},on:{click:function(e){t.switchOption(t.item,4)}}},[t._v("4")]),t._v(" "),i("select-card-option",{attrs:{value:5},on:{click:function(e){t.switchOption(t.item,5)}}},[t._v("5")])],1):t._e()],1)};g._withStripped=!0;var w={render:g,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"af-topbar"},[e("span",{staticClass:"f-18"},[this._v("通用设置")])])}]},_=w;var x=!1;var b=i("VU/8")(f,_,!1,function(t){x||i("9z83")},null,null);b.options.__file="src/apps/settings/common/index.vue";e.default=b.exports},ErGV:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.app-article-add-thumb .layer-ctn {\n  max-width: 1000px;\n}\n.app-article-add-thumb .layer-ctn .af-left {\n  width: 280px;\n  background: #fff;\n  border-right: 1px solid rgba(0, 0, 0, 0.05);\n}\n.app-article-add-thumb .layer-ctn .nav-item {\n  height: 40px;\n  border-bottom: 1px solid #eee;\n  line-height: 1em;\n  padding: 0 5px 0 15px;\n}\n.app-article-add-thumb .layer-ctn .nav-item.nav-item-folder {\n  padding-left: 30px;\n}\n.app-article-add-thumb .layer-ctn .nav-item:hover {\n  background: rgba(0, 0, 0, 0.05);\n}\n.app-article-add-thumb .layer-ctn .nav-item.on {\n  background: #318fff;\n  border-color: #fff;\n  color: #fff;\n}\n.app-article-add-thumb .layer-ctn .nav-item.on .icon-btn {\n  color: #fff;\n}\n.app-article-add-thumb .layer-ctn .nav-item input {\n  border: none;\n  height: 36px;\n  background: transparent;\n}\n.app-article-add-thumb .layer-ctn .nav-item input::-webkit-input-placeholder {\n  color: #aaa;\n}\n.app-article-add-thumb .layer-ctn .nav-item .nav-item-icon {\n  margin-right: 15px;\n}\n.app-article-add-thumb .layer-ctn .search-bar input {\n  width: 150px;\n  height: 100%;\n  border: none;\n  margin-left: 10px;\n}\n.app-article-add-thumb .layer-ctn .media-group {\n  padding: 13px 30px;\n}\n.app-article-add-thumb .layer-ctn .media-group ul {\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n}\n.app-article-add-thumb .layer-ctn .media-group li {\n  margin: 0 6px 6px 0;\n}\n.app-article-add-thumb .layer-ctn .media-group-title {\n  padding: 15px 0;\n}\n.app-article-add-thumb .layer-ctn .media-group-title {\n  padding: 15px 0;\n}\n",""])},eSnv:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.settings-common {\n  background: #fafafa;\n}\n.settings-common .content {\n  background: #eee;\n}\n.settings-common .setting-card {\n  max-width: 800px;\n  margin: 20px auto;\n  border-radius: 10px;\n  padding-left: 20px;\n  background: #fff;\n}\n.settings-common .setting-card > ul > li {\n  padding: 12px 20px 12px 0;\n  border-bottom: 1px solid #e1e1e1;\n}\n.settings-common .setting-card > ul > li:last-child {\n  border-bottom: 0;\n}\n",""])},pt6W:function(t,e,i){var a=i("ErGV");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("36006769",a,!1,{})}});