webpackJsonp([26],{"4sCi":function(t,e,n){var i=n("QKvA");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("5fad25c4",i,!1,{})},"9S2G":function(t,e,n){var i=n("oEuA");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("38a66a48",i,!1,{})},QKvA:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.melist_s{\n  width: calc(25% - 26px);\n  margin-bottom: 10px;\n  overflow: hidden;\n  margin-right: 26px;\n}\n.melist_sbox{\n  margin-left: 20px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n}\n.melist_box{\n  border-bottom: 1px solid #127ddd;\n  margin-bottom: 10px;\n}\n.qxbtn{\n  position: absolute;\n  z-index: 100;\n  left: 20px;\n  bottom: 20px;\n  width: 60px;\n}\n",""])},"e+cM":function(t,e,n){var i=n("yHfW");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("23dd2cc5",i,!1,{})},jbzV:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("//Fk"),s=n.n(i),a=n("fZjL"),c=n.n(a),l=n("2get"),o=n("XRQI"),r=n("mvHQ"),h=n.n(r),d={name:"app-roles-new",props:{menuList:{type:Array,default:function(){return[]}},siteList:{type:Array,default:function(){return[]}}},data:function(){return{ui:{roleMenuShow:!1,roleSiteShow:!1,siteShow:!1,roleSiteActive:{id:"",identifyId:""},roleSiteFlag:!1,channels:[]},menuAll:!1,form:{rolesName:"",rolesCnName:"",app:[],addSiteChannels:""},site:[],checkList:{menu:[],channels:[]}}},methods:{handleCheckChange:function(t){this.checkList.channels.indexOf(t.id)<0?this.channelsfor(t.children,!0):this.channelsfor(t.children,!1)},channelsopen:function(t,e){var n=this;t.forEach(function(t){t.id!=e?t.children.length>0&&n.channelsopen(t.children):t.open=!0})},channelsfor:function(t,e){var n=this;t.forEach(function(t){if(1==e){var i=n.checkList.channels.indexOf(t.id);i>=0&&n.checkList.channels.splice(i,1)}else n.checkList.channels.indexOf(t.id)<0&&n.checkList.channels.push(t.id);t.children.length>0&&n.channelsfor(t.children,e)})},menuAllFalse:function(){this.menuAll||this.menuList.forEach(function(t){t.checked=!1,t.children.forEach(function(t){t.checked=!1})})},menuChange:function(t,e){t.checked||(this.menuAll=!1),"-1"==t.pId&&(t.checked?this.menuList[e].children.forEach(function(t){t.checked=!0}):this.menuList[e].children.forEach(function(t){t.checked=!1}))},menuFormat:function(t,e){var n=t.split("-");return"<span>"+n[0]+'</span><span class="c-8 f-12" style="margin-left: 10px;">'+n[1].replace("【权限路径为:","").replace("】","")+"</span>"+(e.checked?'<i class="icon" style="color: #52d277;font-size: 14px;margin-left: 10px;">check</i>':"")},channelFormat:function(t,e){return t+(e.checked?'<i class="icon" style="color: #52d277;font-size: 14px;margin-left: 10px;">check</i>':"")},selectSite:function(t,e){var n=this;console.log(t,e),this.ui.roleSiteActive.id=t,this.ui.roleSiteActive.identifyId=e,this.ui.roleSiteFlag=!1,this.$http.post("/cri-cms-platform/sysRoles/getChannelsToRole.monitor",{id:t,siteIdToRole:e}).then(function(t){n.ui.channels=t,n.ui.roleSiteFlag=!0}).catch(function(t){n.$toast(t.msg)})},submit:function(){var t=this,e=[];this.menuList.forEach(function(t){1==t.checked&&e.push(t.id),t.children.forEach(function(t){1==t.checked&&e.push(t.id)})}),this.form.app=e.join(","),this.form.addSiteChannels=h()({data:this.site.filter(function(t){return""!==t.channels})}),this.$http.post("/cri-cms-platform/sysRoles/save.monitor",this.form).then(function(e){t.$emit("getList"),t.$emit("close")}).catch(function(e){t.$toast(e.msg)})}},created:function(){this.site=this.siteList.map(function(t){return{siteId:t.identifyId,channels:""}})},watch:{menuAll:function(t){t&&this.menuList.forEach(function(t){t.checked=!0,t.children.forEach(function(t){t.checked=!0})})},"checkList.menu":function(t){this.form.app=t.join(",")},"ui.roleSiteActive.identifyId":function(t){var e=this.site.find(function(e){return e.siteId===t}).channels;""===e&&(this.checkList.channels=[]),this.checkList.channels=e.split(",")},"checkList.channels":function(t){var e=this;this.site.find(function(t){return t.siteId===e.ui.roleSiteActive.identifyId}).channels=t.join(",")}}},u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("layer",{attrs:{title:"添加新角色",width:"600px"}},[n("div",{staticClass:"layer-text"},[n("input-box",{attrs:{label:"角色名称"},model:{value:t.form.rolesName,callback:function(e){t.$set(t.form,"rolesName",e)},expression:"form.rolesName"}}),t._v(" "),n("input-box",{attrs:{label:"角色中文名称"},model:{value:t.form.rolesCnName,callback:function(e){t.$set(t.form,"rolesCnName",e)},expression:"form.rolesCnName"}}),t._v(" "),n("div",{staticClass:"relative input-box"},[n("label",[t._v("关联菜单")]),t._v(" "),n("div",{staticStyle:{"padding-left":"80px",height:"30px","line-height":"30px",cursor:"pointer"},on:{click:function(e){t.ui.roleMenuShow=!0}}},[t._v("请选择 "),n("i",{staticClass:"icon",staticStyle:{"font-size":"16px"}},[t._v("keyboard_arrow_down")])])]),t._v(" "),n("div",{staticClass:"relative input-box"},[n("label",[t._v("关联站点")]),t._v(" "),n("div",{staticStyle:{"padding-left":"80px",height:"30px","line-height":"30px",cursor:"pointer"},on:{click:function(e){t.ui.roleSiteShow=!0}}},[t._v("请选择 "),n("i",{staticClass:"icon",staticStyle:{"font-size":"16px"}},[t._v("keyboard_arrow_down")])])])],1),t._v(" "),n("div",{staticClass:"layer-btns"},[n("btn",{attrs:{flat:""},on:{click:function(e){t.$emit("close")}}},[t._v("取消")]),t._v(" "),n("btn",{attrs:{flat:"",color:"#008cff"},on:{click:t.submit}},[t._v("确定")])],1),t._v(" "),t.ui.roleMenuShow?n("layer",{attrs:{title:"选择菜单",width:"600px"}},[n("div",{staticClass:"layer-text"},t._l(t.menuList,function(e,i){return n("div",{staticClass:"melist_box"},[n("div",{staticStyle:{"margin-bottom":"10px"}},[n("check-box",{staticStyle:{width:"100%"},attrs:{text:e.name},on:{change:function(n){t.menuChange(e,i)}},model:{value:e.checked,callback:function(n){t.$set(e,"checked",n)},expression:"item.checked"}})],1),t._v(" "),n("div",{staticClass:"melist_sbox"},t._l(e.children,function(e,i){return n("div",{staticClass:"melist_s",attrs:{title:e.name}},[n("check-box",{staticStyle:{margin:"0",width:"100%"},attrs:{text:e.name},on:{change:function(n){t.menuChange(e,i)}},model:{value:e.checked,callback:function(n){t.$set(e,"checked",n)},expression:"item1.checked"}})],1)}))])})),t._v(" "),n("div",{staticClass:"layer-btns"},[n("btn",{attrs:{flat:""},on:{click:function(e){t.ui.roleMenuShow=!1}}},[t._v("关闭")])],1),t._v(" "),n("check-box",{staticClass:"qxbtn",attrs:{text:"全选"},on:{change:t.menuAllFalse},model:{value:t.menuAll,callback:function(e){t.menuAll=e},expression:"menuAll"}})],1):t._e(),t._v(" "),t.ui.roleSiteShow?n("layer",{attrs:{title:"选择站点频道",width:"600px"}},[n("div",{staticClass:"layer-text flex"},[n("ul",{staticClass:"site-list"},t._l(t.siteList,function(e){return n("li",{key:e.id,class:{on:e.id===t.ui.roleSiteActive.id,selected:t.site.find(function(t){return t.siteId===e.identifyId}).channels},on:{click:function(n){t.selectSite(e.id,e.identifyId)}}},[t._v(t._s(e.name))])})),t._v(" "),n("div",{staticClass:"channel-list"},[t.ui.roleSiteFlag?n("tree",{ref:"treenode",attrs:{data:t.ui.channels,"pid-txt":"channelPartentId","name-txt":"channelName",format:t.channelFormat,"show-checkbox":"","checked-list":t.checkList.channels},on:{handleCheckChange:t.handleCheckChange,"update:checkedList":function(e){t.$set(t.checkList,"channels",e)}}}):t._e()],1)]),t._v(" "),n("div",{staticClass:"layer-btns"},[n("btn",{attrs:{flat:""},on:{click:function(e){t.ui.roleSiteShow=!1}}},[t._v("关闭")])],1)]):t._e()],1)};u._withStripped=!0;var f={render:u,staticRenderFns:[]},p=f;var m=!1;var v=n("VU/8")(d,p,!1,function(t){m||n("e+cM")},"data-v-cecd08ec",null);v.options.__file="src/apps/roles/new.vue";var x=v.exports,_={name:"app-roles-edit",props:{id:{type:String,default:""},siteList:{type:Array,default:function(){return[]}}},data:function(){return{menuList:[],menuAll:!1,ui:{loading:!0,roleMenuShow:!1,roleSiteShow:!1,siteShow:!1,roleSiteActive:{id:"",identifyId:""},roleSiteFlag:!1,channels:[]},form:{id:"",rolesCnName:"",editApp:"",editSiteChannels:""},site:[],checkList:{menu:[],channels:[]}}},methods:{handleCheckChange:function(t){this.checkList.channels.indexOf(t.id)<0?this.channelsfor(t.children,!0):this.channelsfor(t.children,!1)},channelsopen:function(t,e){var n=this;t.forEach(function(t){t.id!=e?t.children.length>0&&n.channelsopen(t.children):t.open=!0})},channelsfor:function(t,e){var n=this;t.forEach(function(t){if(1==e){var i=n.checkList.channels.indexOf(t.id);i>=0&&n.checkList.channels.splice(i,1)}else n.checkList.channels.indexOf(t.id)<0&&n.checkList.channels.push(t.id);t.children.length>0&&n.channelsfor(t.children,e)})},menuAllFalse:function(){this.menuAll||this.menuList.forEach(function(t){t.checked=!1,t.children.forEach(function(t){t.checked=!1})})},menuChange:function(t,e){t.checked||(this.menuAll=!1),"-1"==t.pId&&(t.show=!1,t.checked?this.menuList[e].children.forEach(function(t){t.checked=!0}):this.menuList[e].children.forEach(function(t){t.checked=!1}),this.$nextTick(function(){t.show=!0}))},menuFormat:function(t,e){var n=t.split("-");return"<span>"+n[0]+'</span><span class="c-8 f-12" style="margin-left: 10px;">'+n[1].replace("【权限路径为:","").replace("】","")+"</span>"+(e.checked?'<i class="icon" style="color: #52d277;font-size: 14px;margin-left: 10px;">check</i>':"")},channelFormat:function(t,e){return t+(e.checked?'<i class="icon" style="color: #52d277;font-size: 14px;margin-left: 10px;">check</i>':"")},selectSite:function(t,e){var n=this;this.ui.roleSiteActive.id=t,this.ui.roleSiteActive.identifyId=e,this.ui.roleSiteFlag=!1,this.$http.post("/cri-cms-platform/sysRoles/getChannelsToRole.monitor",{id:t,siteIdToRole:e}).then(function(t){n.ui.channels=t,n.ui.roleSiteFlag=!0}).catch(function(t){n.$toast(t.msg)})},submit:function(){var t=this,e=[];this.menuList.forEach(function(t){1==t.checked&&e.push(t.id),t.children.forEach(function(t){1==t.checked&&e.push(t.id)})}),this.form.editApp=e.join(","),this.form.editSiteChannels=h()({data:this.site.filter(function(t){return""!==t.channels})}),this.$http.post("/cri-cms-platform/sysRoles/update.monitor",this.form).then(function(e){t.$emit("getList"),t.$emit("close")}).catch(function(e){t.$toast(e.msg)})}},created:function(){var t=this;this.site=this.siteList.map(function(t){return{siteId:t.identifyId,channels:""}}),this.id||(this.$emit("close"),this.$emit("未知错误，找不到id")),this.$http.post("/cri-cms-platform/sysRoles/updateQuery.monitor",{id:this.id}).then(function(e){console.log(e),t.form.id=t.id,t.form.rolesName=e.sysRoles.rolesName,t.form.rolesCnName=e.sysRoles.rolesCnName,e.siteChannels.forEach(function(e){t.site.find(function(t){return t.siteId===e.siteId}).channels=e.channels.filter(function(t){return t.checked}).map(function(t){return t.id}).join(",")}),t.ui.loading=!1;var n=[];e.menus.forEach(function(t){-1==t.pId&&(t.children=[],t.show=!0,n.push(t))}),e.menus.forEach(function(t){if(t.name=t.name.split("-")[0],-1!=t.pId)for(var e=0;e<n.length;e++)n[e].id==t.pId&&(n[e].children.push(t),e=n.length)}),t.menuList=n}).catch(function(e){t.$toast(e.msg)})},watch:{menuAll:function(t){t&&this.menuList.forEach(function(t){t.checked=!0,t.children.forEach(function(t){t.checked=!0})})},"checkList.menu":function(t){this.form.editApp=t.join(",")},"ui.roleSiteActive.identifyId":function(t){var e=this.site.find(function(e){return e.siteId===t}).channels;""===e&&(this.checkList.channels=[]),this.checkList.channels=e.split(",")},"checkList.channels":function(t){var e=this;this.site.find(function(t){return t.siteId===e.ui.roleSiteActive.identifyId}).channels=t.join(",")}}},g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("layer",{attrs:{title:"修改角色",width:"600px"}},[t.ui.loading?t._e():n("div",{staticClass:"layer-text"},[n("input-box",{attrs:{label:"角色中文名称"},model:{value:t.form.rolesCnName,callback:function(e){t.$set(t.form,"rolesCnName",e)},expression:"form.rolesCnName"}}),t._v(" "),n("div",{staticClass:"relative input-box"},[n("label",[t._v("关联菜单")]),t._v(" "),n("div",{staticStyle:{"padding-left":"80px",height:"30px","line-height":"30px",cursor:"pointer"},on:{click:function(e){t.ui.roleMenuShow=!0}}},[t._v("请选择 "),n("i",{staticClass:"icon",staticStyle:{"font-size":"16px"}},[t._v("keyboard_arrow_down")])])]),t._v(" "),n("div",{staticClass:"relative input-box"},[n("label",[t._v("关联站点")]),t._v(" "),n("div",{staticStyle:{"padding-left":"80px",height:"30px","line-height":"30px",cursor:"pointer"},on:{click:function(e){t.ui.roleSiteShow=!0}}},[t._v("请选择 "),n("i",{staticClass:"icon",staticStyle:{"font-size":"16px"}},[t._v("keyboard_arrow_down")])])])],1),t._v(" "),n("div",{staticClass:"layer-btns"},[n("btn",{attrs:{flat:""},on:{click:function(e){t.$emit("close")}}},[t._v("取消")]),t._v(" "),n("btn",{attrs:{flat:"",color:"#008cff"},on:{click:t.submit}},[t._v("确定")])],1),t._v(" "),t.ui.roleMenuShow?n("layer",{attrs:{title:"选择菜单",width:"600px"}},[n("div",{staticClass:"layer-text"},t._l(t.menuList,function(e,i){return n("div",{staticClass:"melist_box"},[n("div",{staticStyle:{"margin-bottom":"10px"}},[n("check-box",{staticStyle:{width:"100%"},attrs:{text:e.name},on:{change:function(n){t.menuChange(e,i)}},model:{value:e.checked,callback:function(n){t.$set(e,"checked",n)},expression:"item.checked"}})],1),t._v(" "),e.show?n("div",{staticClass:"melist_sbox"},t._l(e.children,function(e,i){return n("div",{staticClass:"melist_s",attrs:{title:e.name}},[n("check-box",{staticStyle:{margin:"0",width:"100%"},attrs:{text:e.name},on:{change:function(n){t.menuChange(e,i)}},model:{value:e.checked,callback:function(n){t.$set(e,"checked",n)},expression:"item1.checked"}})],1)})):t._e()])})),t._v(" "),n("div",{staticClass:"layer-btns"},[n("btn",{attrs:{flat:""},on:{click:function(e){t.ui.roleMenuShow=!1}}},[t._v("关闭")])],1),t._v(" "),n("check-box",{staticClass:"qxbtn",attrs:{text:"全选"},on:{change:t.menuAllFalse},model:{value:t.menuAll,callback:function(e){t.menuAll=e},expression:"menuAll"}})],1):t._e(),t._v(" "),t.ui.roleSiteShow?n("layer",{attrs:{title:"选择站点频道",width:"600px"}},[n("div",{staticClass:"layer-text flex"},[n("ul",{staticClass:"site-list"},t._l(t.siteList,function(e){return n("li",{key:e.id,class:{on:e.id===t.ui.roleSiteActive.id,selected:t.site.find(function(t){return t.siteId===e.identifyId}).channels},on:{click:function(n){t.selectSite(e.id,e.identifyId)}}},[t._v(t._s(e.name))])})),t._v(" "),n("div",{staticClass:"channel-list"},[t.ui.roleSiteFlag?n("tree",{ref:"treenode",attrs:{data:t.ui.channels,"pid-txt":"channelPartentId","name-txt":"channelName",format:t.channelFormat,"show-checkbox":"","checked-list":t.checkList.channels},on:{handleCheckChange:t.handleCheckChange,"update:checkedList":function(e){t.$set(t.checkList,"channels",e)}}}):t._e()],1)]),t._v(" "),n("div",{staticClass:"layer-btns"},[n("btn",{attrs:{flat:""},on:{click:function(e){t.ui.roleSiteShow=!1}}},[t._v("关闭")])],1)]):t._e()],1)};g._withStripped=!0;var b={render:g,staticRenderFns:[]},k=b;var y=!1;var S=n("VU/8")(_,k,!1,function(t){y||n("4sCi")},null,null);S.options.__file="src/apps/roles/edit.vue";var w=S.exports,C={name:"app-roles",components:{Account:l.a,Dock:o.a,rolesNew:x,rolesEdit:w},data:function(){return{loading:!0,list:[],menuList:[],siteList:[],total:1,page:1,detail:{},detailShow:!1,tab:"base",siteActive:"",detailSiteChannels:[],newRoleShow:!1,editRoleShow:!1,editId:""}},methods:{getList:function(){var t=this;this.loading=!0,this.$http.post("/cri-cms-platform/sysRoles/queryList.monitor",{pageSize:15,toPage:this.page}).then(function(e){t.list=e.pages,t.total=15*e.totalPage,t.loading=!1}).catch(function(e){t.$toast(e.msg)})},menuFormat:function(t,e){var n=t.split("-");return"<span>"+n[0]+'</span><span class="c-8 f-12" style="margin-left: 10px;">'+n[1].replace("【权限路径为:","").replace("】","")+"</span>"+(e.checked?'<i class="icon" style="color: #52d277;font-size: 14px;margin-left: 10px;">check</i>':"")},channelFormat:function(t,e){return t+(e.checked?'<i class="icon" style="color: #52d277;font-size: 14px;margin-left: 10px;">check</i>':"")},openDetail:function(t){var e=this;if(0!==c()(this.detail).length&&this.detail.sysRoles.id===t)return this.tab="base",this.siteActive="",this.detailSiteChannels=[],void(this.detailShow=!0);this.$http.post("/cri-cms-platform/sysRoles/updateQuery.monitor",{id:t}).then(function(t){e.tab="base",e.siteActive="",e.detailSiteChannels=[],e.detail=t,e.detailShow=!0}).catch(function(t){e.$toast(t.msg)})},selectSite:function(t){this.siteActive=t.siteId,this.detailSiteChannels=t.channels},edit:function(t){this.editId=t,this.editRoleShow=!0},deleteRole:function(t){var e=this;this.$confirm({title:"您确定要删除此角色吗？",text:"被删除的角色将无法恢复。",btns:["取消","删除"],color:"red",yes:function(){e.$http.post("/cri-cms-platform/sysRoles/del.monitor",{id:t}).then(function(t){e.getList()})}})}},created:function(){var t=this;s.a.all([this.$http.post("/cri-cms-platform/sysRoles/queryList.monitor",{pageSize:15,toPage:this.page}),this.$http.post("/cri-cms-platform/sysRoles/getMenus.monitor"),this.$http.post("/cri-cms-platform/sysRoles/getSite.monitor")]).then(function(e){console.log(e),t.list=e[0].pages,t.total=15*e[0].totalPage,t.siteList=e[2].sites;var n=[];e[1].menus.forEach(function(t){-1==t.pId&&(t.children=[],n.push(t))}),e[1].menus.forEach(function(t){if(t.name=t.name.split("-")[0],t.checked=!1,-1!=t.pId){t.show=!0;for(var e=0;e<n.length;e++)n[e].id==t.pId&&(n[e].children.push(t),e=n.length)}}),t.menuList=n,console.log(t.menuList),t.loading=!1})}},L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"abs bg-f c-6 flex-col app-roles"},[n("div",{staticClass:"af-topbar flex-v-center"},[n("dock",{attrs:{title:"角色",color:"#2088ff"}}),t._v(" "),n("div",{staticClass:"flex-item"}),t._v(" "),n("account")],1),t._v(" "),n("div",{staticClass:"flex-item scroll-y bg-e relative roles-content"},[n("transition",{attrs:{name:"fade"}},[t.loading?n("div",{staticClass:"abs bg-e",staticStyle:{"z-index":"99"}},[n("loading",{staticStyle:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"}})],1):t._e()]),t._v(" "),n("div",{staticClass:"setting-card f-16 add-btn",on:{click:function(e){t.newRoleShow=!0}}},[t._v("\n      添加新角色...\n    ")]),t._v(" "),n("div",{staticClass:"setting-card f-14"},[n("table",[t._m(0),t._v(" "),n("tbody",t._l(t.list,function(e,i){return n("tr",{key:e.id,on:{click:function(n){t.openDetail(e.id)}}},[n("td",[t._v(t._s(i+1))]),t._v(" "),n("td",[t._v(t._s(e.rolesName))]),t._v(" "),n("td",[t._v(t._s(e.rolesCnName))]),t._v(" "),n("td",[t._v(t._s(e.createUser))]),t._v(" "),n("td",[t._v(t._s(e.createTime))]),t._v(" "),n("td",{staticStyle:{width:"30px"}},[n("icon-btn",{attrs:{small:""},nativeOn:{click:function(n){n.stopPropagation(),t.edit(e.id)}}},[t._v("edit")])],1),t._v(" "),n("td",{staticStyle:{width:"30px"}},[n("icon-btn",{attrs:{small:""},nativeOn:{click:function(n){n.stopPropagation(),t.deleteRole(e.id)}}},[t._v("delete")])],1)])}))]),t._v(" "),n("div",{staticClass:"flex-center"},[n("pagination",{attrs:{page:t.page,size:15,total:t.total},on:{change:function(e){t.page=e,t.getList()}}})],1)])],1),t._v(" "),t.detailShow?n("layer",{attrs:{title:"角色详情",width:"600px",maskClick:""},on:{close:function(e){t.detailShow=!1}}},[n("div",{staticClass:"layer-text"},[n("div",{staticStyle:{"text-align":"center"}},[n("div",{staticClass:"tab"},[n("div",{staticClass:"tab-item",class:{on:"base"===t.tab},on:{click:function(e){t.tab="base"}}},[t._v("基本信息")]),t._v(" "),n("div",{staticClass:"tab-item",class:{on:"menu"===t.tab},on:{click:function(e){t.tab="menu"}}},[t._v("菜单信息")]),t._v(" "),n("div",{staticClass:"tab-item",class:{on:"site"===t.tab},on:{click:function(e){t.tab="site"}}},[t._v("站点信息")])])]),t._v(" "),n("transition",{attrs:{name:"fade",mode:"out-in"}},["base"===t.tab?n("table",{key:"base"},[n("tbody",[n("tr",[n("th",{attrs:{align:"right"}},[t._v("角色名称")]),t._v(" "),n("td",[t._v(t._s(t.detail.sysRoles.rolesName))])]),t._v(" "),n("tr",[n("th",{attrs:{align:"right"}},[t._v("角色中文名")]),t._v(" "),n("td",[t._v(t._s(t.detail.sysRoles.rolesCnName))])]),t._v(" "),n("tr",[n("th",{attrs:{align:"right"}},[t._v("创建人")]),t._v(" "),n("td",[t._v(t._s(t.detail.sysRoles.createUser))])]),t._v(" "),n("tr",[n("th",{attrs:{align:"right"}},[t._v("创建时间")]),t._v(" "),n("td",[t._v(t._s(t.detail.sysRoles.createTime))])])])]):t._e(),t._v(" "),"menu"===t.tab?n("div",{key:"menu",staticStyle:{"min-height":"200px"}},[n("tree",{attrs:{data:t.detail.menus,pidTxt:"pId",rootId:"-1",format:t.menuFormat}})],1):t._e(),t._v(" "),"site"===t.tab?n("div",{key:"site",staticClass:"flex"},[n("ul",{staticClass:"site-list"},t._l(t.detail.siteChannels,function(e){return n("li",{key:e.siteId,class:{on:e.siteId===t.siteActive},on:{click:function(n){t.selectSite(e)}}},[t._v(t._s(e.siteName))])})),t._v(" "),n("div",{staticClass:"channel-list"},[n("tree",{attrs:{data:t.detailSiteChannels,"pid-txt":"pId",format:t.channelFormat}})],1)]):t._e()])],1),t._v(" "),n("div",{staticClass:"layer-btns"},[n("btn",{attrs:{flat:"",color:"#008cff"},on:{click:function(e){t.detailShow=!1}}},[t._v("关闭")])],1)]):t._e(),t._v(" "),t.newRoleShow?n("roles-new",{attrs:{"menu-list":t.menuList,"site-list":t.siteList},on:{close:function(e){t.newRoleShow=!1},getList:t.getList}}):t._e(),t._v(" "),t.editRoleShow?n("roles-edit",{attrs:{id:t.editId,"site-list":t.siteList},on:{close:function(e){t.editRoleShow=!1},getList:t.getList}}):t._e()],1)};L._withStripped=!0;var A={render:L,staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",[t._v("序号")]),t._v(" "),n("th",[t._v("角色名称")]),t._v(" "),n("th",[t._v("角色中文名")]),t._v(" "),n("th",[t._v("创建人")]),t._v(" "),n("th",[t._v("创建时间")]),t._v(" "),n("th",{attrs:{colspan:"2"}},[t._v("操作")])])}]},I=A;var $=!1;var R=n("VU/8")(C,I,!1,function(t){$||n("9S2G")},null,null);R.options.__file="src/apps/roles/index.vue";e.default=R.exports},oEuA:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.app-roles .roles-content .setting-card {\n  max-width: 1440px;\n  margin: 20px auto;\n  border-radius: 10px;\n  padding: 20px;\n  background: #fff;\n}\n.app-roles .roles-content .setting-card th,\n.app-roles .roles-content .setting-card td {\n  padding: 5px 10px;\n}\n.app-roles .roles-content .setting-card tr {\n  border-top: 1px solid #e1e1e1;\n  cursor: pointer;\n}\n.app-roles .roles-content .setting-card tr:hover {\n  background: rgba(0, 0, 0, 0.05);\n}\n.app-roles .roles-content .add-btn {\n  color: #008cff;\n  padding: 14px 30px;\n  cursor: pointer;\n  -webkit-transition: background 0.2s;\n  transition: background 0.2s;\n}\n.app-roles .roles-content .add-btn:active {\n  background: #e1e1e1;\n}\n.app-roles .layer-text .tab {\n  margin-bottom: 10px;\n}\n.app-roles .layer-text th,\n.app-roles .layer-text td {\n  padding: 5px 15px;\n}\n.app-roles .layer-text th {\n  width: 130px;\n}\n.app-roles .layer-text .site-list {\n  width: 100px;\n  border-right: 1px solid rgba(0, 0, 0, 0.07);\n  -ms-flex-item-align: stretch;\n      align-self: stretch;\n}\n.app-roles .layer-text .site-list li {\n  height: 30px;\n  line-height: 30px;\n  padding: 0 20px;\n  -webkit-transition: all 0.2s;\n  transition: all 0.2s;\n  cursor: pointer;\n}\n.app-roles .layer-text .site-list li:hover {\n  background: rgba(0, 0, 0, 0.05);\n}\n.app-roles .layer-text .site-list li.selected {\n  color: #4caf50;\n}\n.app-roles .layer-text .site-list li.on {\n  color: #008cff;\n}\n.app-roles .layer-text .channel-list {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  min-height: 40px;\n}\n",""])},yHfW:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.melist_s[data-v-cecd08ec]{\n  width: calc(25% - 26px);\n  margin-bottom: 10px;\n  overflow: hidden;\n  margin-right: 26px;\n}\n.melist_sbox[data-v-cecd08ec]{\n  margin-left: 20px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n}\n.melist_box[data-v-cecd08ec]{\n  border-bottom: 1px solid #127ddd;\n  margin-bottom: 10px;\n}\n.qxbtn[data-v-cecd08ec]{\n  position: absolute;\n  z-index: 100;\n  left: 20px;\n  bottom: 20px;\n  width: 60px;\n}\n",""])}});