webpackJsonp([28],{"9vqm":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("WUXh"),s=a("PJh5"),o=a.n(s),n=a("MYRd"),r={name:"settings-member",components:{VueDatepickerLocal:i.a,AfLeft:n.a},data:function(){return{searchTime:[],loading:!1,operFlagShow:!1,list:[],appTypeList:[],filter:{toPage:1},total:1,totalRowsAmount:"",flagShow:!1,app:[],operFlag:[],operFlagList:[{name:"登录",app:"ogin",state:!1},{name:"发布",app:"issue",state:!1},{name:"审核",app:"pass",state:!1},{name:"删除",app:"delete",state:!1},{name:"新增",app:"add",state:!1},{name:"驳回",app:"reject",state:!1}]}},methods:{flagChange:function(t){var e=this;this.operFlag=[],this.operFlagList.forEach(function(t){t.state&&e.operFlag.push(t.app)}),this.getList()},appChange:function(t){var e=this;this.app=[],this.appTypeList.forEach(function(t){t.state&&e.app.push(t.app)}),this.getList()},search:function(){var t=this;this.loading=!0,this.$http.post("cri-cms-platform/userOperLog/page.monitor",{toPage:1,operType:this.$route.query.operType,startTime:o()(this.searchTime[0]).format("YYYY-MM-DD"),endTime:o()(this.searchTime[1]).format("YYYY-MM-DD")}).then(function(e){console.log(e),t.list=e.data,t.totalRowsAmount=e.totalRowsAmount,t.total=15*e.totalPage,t.loading=!1}).catch(function(t){console.log(t)})},getList:function(){var t=this;this.loading=!0,this.$http.post("cri-cms-platform/userOperLog/page.monitor",{operType:this.$route.query.operType,toPage:this.filter.toPage,startTime:this.searchTime[0]?o()(this.searchTime[0]).format("YYYY-MM-DD"):"",endTime:this.searchTime[1]?o()(this.searchTime[1]).format("YYYY-MM-DD"):"",app:this.app.join(","),operFlag:this.operFlag.join(",")}).then(function(e){t.list=e.data,t.filter={toPage:e.current},t.total=e.totalPage,t.loading=!1}).catch(function(t){console.log(t)})}},created:function(){this.getList();var t=this.$store.state.account.appTypeList;for(var e in t){var a={};a.name=t[e],a.app=e,a.state=!1,this.appTypeList.push(a)}},watch:{"$route.query.operType":function(){this.getList()}}},p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"abs bg-f flex app-audit",staticStyle:{"margin-bottom":"50px"}},[a("af-left",{attrs:{color:"#00897B","vibrant-color":"#00897B","bg-color":"#E0F2F1",title:"操作日志"}},[a("navigator-item",{attrs:{icon:"folder",index:"login"},on:{click:function(e){t.$router.replace("/userOperLog?operType=login")}}},[t._v("登录")]),t._v(" "),a("navigator-item",{attrs:{icon:"folder",index:"oper"},on:{click:function(e){t.$router.replace("/userOperLog?operType=oper")}}},[t._v("操作")])],1),t._v(" "),a("div",{staticClass:"operlog_list scroll-y"},[a("transition",{attrs:{name:"fade"}},[t.loading?a("div",{staticClass:"abs bg-e",staticStyle:{"z-index":"99"}},[a("loading",{staticStyle:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"}})],1):t._e()]),t._v(" "),a("div",{staticClass:"af-topbar"},[a("span",{staticClass:"f-18"},[t._v(t._s("login"==t.$route.query.operType?"登录":"操作"))])]),t._v(" "),a("div",{staticClass:"flex-item",staticStyle:{background:"#eee",padding:"30px 0"}},[a("div",{staticClass:"relative",staticStyle:{"max-width":"1000px",margin:"0 auto",background:"#fff",padding:"30px","border-radius":"10px"}},[a("div",{staticClass:"setting-card f-14",staticStyle:{position:"relative"}},[a("div",{staticClass:"search_navbox",staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"flex-v-center"},["login"!=t.$route.query.operType?a("div",{staticClass:"option-item flex-item relative a",staticStyle:{display:"inline-block",width:"80px",height:"23px","margin-right":"20px"},on:{click:function(e){t.flagShow=!t.flagShow}}},[a("span",{staticClass:"flex-item",staticStyle:{"text-align":"center"}},[t._v("选择类型")]),t._v(" "),a("i",{staticClass:"icon f-20 c-a",staticStyle:{position:"absolute",right:"0",top:"0"}},[t._v("keyboard_arrow_down")]),t._v(" "),t.flagShow?a("bubble",{attrs:{pos:"bottom",align:"center"},on:{close:function(e){t.flagShow=!1}}},[a("ul",{staticStyle:{padding:"6px 0"}},t._l(t.appTypeList,function(e){return a("li",{staticClass:"a flex-v-center",staticStyle:{width:"50px",padding:"0 10px"},on:{click:function(a){e.state=!e.state,t.appChange(e)}}},[a("span",{staticClass:"flex-item"},[t._v(t._s(e.name))]),t._v(" "),e.state?a("i",{staticClass:"icon f-14 blue check-ico"},[t._v("check")]):t._e()])}))]):t._e()],1):t._e(),t._v(" "),"login"!=t.$route.query.operType?a("div",{staticClass:"option-item flex-item relative a",staticStyle:{display:"inline-block",width:"80px",height:"23px"},on:{click:function(e){t.operFlagShow=!t.operFlagShow}}},[a("span",{staticClass:"flex-item",staticStyle:{"text-align":"center"}},[t._v("操作类型")]),t._v(" "),a("i",{staticClass:"icon f-20 c-a",staticStyle:{position:"absolute",right:"0",top:"0"}},[t._v("keyboard_arrow_down")]),t._v(" "),t.operFlagShow?a("bubble",{attrs:{pos:"bottom",align:"center"},on:{close:function(e){t.operFlagShow=!1}}},[a("ul",{staticStyle:{padding:"6px 0"}},t._l(t.operFlagList,function(e){return a("li",{staticClass:"a flex-v-center",staticStyle:{width:"50px",padding:"0 10px"},on:{click:function(a){e.state=!e.state,t.flagChange(e)}}},[a("span",{staticClass:"flex-item"},[t._v(t._s(e.name))]),t._v(" "),e.state?a("i",{staticClass:"icon f-14 blue check-ico"},[t._v("check")]):t._e()])}))]):t._e()],1):t._e()]),t._v(" "),a("div",[a("vue-datepicker-local",{attrs:{format:"YYYY-MM-DD","show-buttons":""},model:{value:t.searchTime,callback:function(e){t.searchTime=e},expression:"searchTime"}}),t._v(" "),a("btn",{staticStyle:{"margin-left":"10px"},on:{click:t.search}},[t._v("搜索")])],1)]),t._v(" "),a("table",[t._m(0),t._v(" "),a("tbody",t._l(t.list,function(e,i){return a("tr",[a("td",{attrs:{nowrap:""}},[t._v(t._s(i+1))]),a("td",{attrs:{nowrap:""}},[t._v(t._s(e.userName))]),t._v(" "),a("td",{attrs:{nowrap:""}},[t._v(t._s(e.createUser))]),t._v(" "),a("td",{attrs:{nowrap:""}},[t._v(t._s(e.createDate))]),t._v(" "),a("td",{attrs:{nowrap:""}},[t._v(t._s(e.operIp))]),t._v(" "),a("td",{staticStyle:{"text-overflow":"ellipsis"},attrs:{nowrap:"",title:e.typeDemo}},[t._v(t._s(e.typeDemo))]),t._v(" "),a("td",{attrs:{nowrap:""}},[t._v(t._s(e.demo))])])}))]),t._v(" "),a("div",{staticClass:"flex-center"},[a("pagination",{attrs:{page:t.filter.toPage,total:t.total},on:{change:function(e){t.filter.toPage=e,t.getList()}}})],1)])])])],1)],1)};p._withStripped=!0;var l={render:p,staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",{attrs:{nowrap:""}},[t._v("序号")]),a("th",{attrs:{nowrap:""}},[t._v("用户名称")]),t._v(" "),a("th",{attrs:{nowrap:""}},[t._v("登录帐号")]),t._v(" "),a("th",{attrs:{nowrap:""}},[t._v("操作时间")]),t._v(" "),a("th",{attrs:{nowrap:""}},[t._v("操作IP")]),t._v(" "),a("th",{attrs:{nowrap:""}},[t._v("操作对象")]),t._v(" "),a("th",{attrs:{nowrap:""}},[t._v("操作说明")])])}]},c=l;var f=!1;var h=a("VU/8")(r,c,!1,function(t){f||(a("QpB5"),a("yb4F"))},"data-v-69fc646c",null);h.options.__file="src/apps/userOperLog/index.vue";e.default=h.exports},JJub:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\nth[data-v-69fc646c],td[data-v-69fc646c] {padding: 10px 10px;max-width: 300px;overflow: hidden;\n}\n",""])},QpB5:function(t,e,a){var i=a("itsN");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("7ac0c80a",i,!1,{})},itsN:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.operlog_list {\n  width: calc(100% - 200px);\n}\n.search_navbox {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\ntr {\n  border-top: 1px solid #e1e1e1;\n  cursor: pointer;\n}\ntr:hover {\n  background: rgba(0, 0, 0, 0.05);\n}\n.search_navbox .datepicker-range .datepicker-popup {\n  width: 415px !important;\n}\n",""])},yb4F:function(t,e,a){var i=a("JJub");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("e3c8aea0",i,!1,{})}});