webpackJsonp([69],{"4cnZ":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"",""])},T2Xw:function(t,e,i){var o=i("4cnZ");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i("rjj0")("3e9aa12e",o,!1,{})},TATH:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={name:"app-comments-list",props:["audit"],data:function(){return{allChecked:!1,toPage:1,checkedShow:!1,totalPage:1,totalRowsAmount:0,loading:!1,list:[],editShow:!1,editForm:{id:"",content:""},stateList:[{text:"已删除",icon:"delete",color:"#D81B60"},{text:"通过",icon:"check_circle",color:"#4caf50"},{text:"待审",icon:"hourglass_full",color:"#ffc107"},{text:"驳回",icon:"error",color:"#ff5252"}]}},computed:{title:function(){var t=this.$route.query;return"2"===t.audit?"待审":"3"===t.audit?"已审":"0"===t.delete?"已删除":"全部"}},methods:{plDelete:function(){var t=this,e=[];this.list.forEach(function(t){t.checked&&e.push(t.id)}),this.$http.post("/cri-cms-platform/comment/delete.monitor",{ids:e.join(",")}).then(function(){t.getList()}).catch(console.log)},plReject:function(){var t=this,e=[];this.list.forEach(function(t){t.checked&&e.push(t.id)}),this.$http.post("/cri-cms-platform/comment/audit/reject.monitor",{ids:e.join(",")}).then(function(){t.getList()}).catch(console.log)},plAudit:function(){var t=this,e=[];this.list.forEach(function(t){t.checked&&e.push(t.id)}),this.$http.post("/cri-cms-platform/comment/audit/pass.monitor",{ids:e.join(",")}).then(function(){t.getList()}).catch(console.log)},onNext:function(){this.toPage+1>this.totalPage||(this.toPage++,this.getList())},onPrev:function(){this.toPage<=1||(this.toPage--,this.getList())},getList:function(){var t=this;this.loading=!0;var e=this.$route.query;e.toPage=this.toPage,this.$http.post("/cri-cms-platform/comment/list.monitor",e).then(function(e){t.totalPage=e.totalPage,t.totalRowsAmount=e.totalRowsAmount,t.toPage=e.current,e.pages.forEach(function(e){e._state=t.getState(e)}),t.list=e.pages,console.log(t.list),t.list.forEach(function(t){t.checked=!1}),t.loading=!1}).catch(console.log)},getState:function(t){var e=t.isAudit,i=t.auditStatus;if("0"===t.deleteStatus)return 0;if("1"===e)return 1;if("2"===e)return 2;if("3"===e){if("1"===i)return 1;if("0"===i)return 3}},pass:function(t){var e=this;this.$http.post("/cri-cms-platform/comment/audit/pass.monitor",{ids:t}).then(function(){e.getList()}).catch(console.log)},reject:function(t){var e=this;this.$http.post("/cri-cms-platform/comment/audit/reject.monitor",{ids:t}).then(function(){e.getList()}).catch(console.log)},openEdit:function(t){this.editForm.id=t.id,this.editForm.content=t.content,this.editShow=!0},submitEdit:function(){var t=this;this.$http.post("/cri-cms-platform/comment/update.monitor",this.editForm).then(function(){t.getList(),t.editShow=!1}).catch(console.log)},deleteItem:function(t){var e=this;this.$confirm({title:"提示",text:"是否删除本条评论？",btns:["取消","删除"],color:"red",yes:function(){e.$http.post("/cri-cms-platform/comment/delete.monitor",{ids:t}).then(function(){e.getList()}).catch(console.log)},no:function(){}})}},created:function(){this.getList()},watch:{allChecked:function(t){t?this.list.forEach(function(t){t.checked=!0}):this.list.forEach(function(t){t.checked=!1})},"$route.query":function(){this.checkedShow=!1,this.toPage=1,this.getList()}}},s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"af-topbar flex"},[i("span",{staticClass:"f-18"},[t._v(t._s(t.title))]),t._v(" "),2==t.$route.query.audit?i("div",{staticStyle:{"padding-left":"40px"}},[i("btn",{staticStyle:{"margin-right":"20px"},on:{click:function(e){t.checkedShow=!t.checkedShow}}},[t._v("批量操作")]),t._v(" "),t.checkedShow?i("span",[i("check-box",{staticStyle:{width:"60px"},attrs:{text:"全选"},model:{value:t.allChecked,callback:function(e){t.allChecked=e},expression:"allChecked"}}),t._v(" "),i("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom",value:"通过",expression:"'通过'",arg:"bottom"}],attrs:{color:"#4caf50"},on:{click:t.plAudit}},[t._v("check_circle")]),t._v(" "),i("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom",value:"驳回",expression:"'驳回'",arg:"bottom"}],attrs:{color:"#ff5252"},on:{click:t.plReject}},[t._v("error")]),t._v(" "),i("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom",value:"删除",expression:"'删除'",arg:"bottom"}],attrs:{color:"#D81B60"},on:{click:t.plDelete}},[t._v("delete")])],1):t._e()],1):t._e()]),t._v(" "),i("div",{staticClass:"flex-item scroll-y bg-e relative"},[i("transition",{attrs:{name:"fade"}},[t.loading?i("div",{staticClass:"abs bg-e",staticStyle:{"z-index":"99"}},[i("loading",{staticStyle:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"}})],1):t._e()]),t._v(" "),t.list.length?i("div",t._l(t.list,function(e){return i("div",{key:e.id,staticClass:"setting-card f-14"},[i("div",{staticClass:"flex-v-center comment-item-info"},[t.checkedShow&&2==t.$route.query.audit?i("check-box",{model:{value:e.checked,callback:function(i){t.$set(e,"checked",i)},expression:"item.checked"}}):t._e(),t._v(" "),i("strong",{staticClass:"f-16",staticStyle:{width:"calc(100% - 100px)"}},[i("a",{attrs:{href:e.contentUrl,target:"_blank"}},[t._v(t._s(e.contentTitle))])]),t._v(" "),i("span",{staticClass:"flex-item"}),t._v(" "),i("i",{staticClass:"icon state-icon f-20",style:{color:t.stateList[e._state].color}},[t._v(t._s(t.stateList[e._state].icon))]),t._v(" "),i("span",{style:{color:t.stateList[e._state].color}},[t._v(t._s(t.stateList[e._state].text))])],1),t._v(" "),i("div",{staticClass:"flex comment-item-info f-12 c-a"},[i("span",[t._v(t._s(e.memberName))]),t._v(" "),i("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.clientIp))]),t._v(" "),i("span",{staticClass:"flex-item"}),t._v(" "),i("span",[t._v(t._s(e.createTime))])]),t._v(" "),i("div",{staticClass:"comment-item-info pre-wrap",staticStyle:{"word-wrap":"break-word"}},[t._v(t._s(e.content))]),t._v(" "),"1"!==e.deleteStatus||t.checkedShow?t._e():i("div",{staticClass:"flex comment-item-info"},[i("span",{staticClass:"flex-item"}),t._v(" "),("2"===e.isAudit||"3"===e.isAudit&&"0"===e.auditStatus)&&0!=t.$route.query.auditStatus?i("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"通过",expression:"'通过'"}],staticStyle:{"margin-right":"5px"},attrs:{color:"#4caf50"},on:{click:function(i){t.pass(e.id)}}},[t._v("check_circle")]):t._e(),t._v(" "),("2"===e.isAudit||"3"===e.isAudit&&"1"===e.auditStatus)&&1!=t.$route.query.auditStatus?i("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"驳回",expression:"'驳回'"}],staticStyle:{"margin-right":"5px"},attrs:{color:"#ff5252"},on:{click:function(i){t.reject(e.id)}}},[t._v("error")]):t._e(),t._v(" "),i("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"修改评论",expression:"'修改评论'"}],staticStyle:{"margin-right":"5px"},on:{click:function(i){t.openEdit(e)}}},[t._v("edit")]),t._v(" "),i("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"删除",expression:"'删除'"}],attrs:{color:"#D81B60"},on:{click:function(i){t.deleteItem(e.id)}}},[t._v("delete")])],1)])})):i("div",{staticClass:"abs flex-center"},[i("no-data")],1),t._v(" "),i("div",{staticClass:"af-bottombar flex-center relative"},[i("icon-btn",{staticClass:"a",attrs:{small:"",disabled:t.toPage<=1},on:{click:t.onPrev}},[t._v("keyboard_arrow_left")]),t._v(" "),i("span",{staticClass:"f-14 c-6",staticStyle:{margin:"0 10px","line-height":"1em"}},[t._v("第 "+t._s(t.toPage)+" / "+t._s(t.totalPage)+" 页")]),t._v(" "),i("icon-btn",{staticClass:"a",attrs:{small:"",disabled:t.toPage>=t.totalPage},on:{click:t.onNext}},[t._v("keyboard_arrow_right")]),t._v(" "),t.totalRowsAmount?i("span",{staticStyle:{position:"absolute",right:"10px",bottom:"8px","font-size":"12px",color:"#999"}},[t._v("共 "+t._s(t.totalRowsAmount)+" 项")]):t._e()],1)],1),t._v(" "),t.editShow?i("layer",{attrs:{title:"修改评论",width:"600px"}},[i("div",{staticClass:"layer-text"},[i("input-box",{attrs:{"multi-line":"",label:"地址"},model:{value:t.editForm.content,callback:function(e){t.$set(t.editForm,"content",e)},expression:"editForm.content"}})],1),t._v(" "),i("div",{staticClass:"layer-btns"},[i("btn",{attrs:{flat:""},on:{click:function(e){t.editShow=!1}}},[t._v("取消")]),t._v(" "),i("btn",{attrs:{flat:"",color:"#008cff"},on:{click:t.submitEdit}},[t._v("提交")])],1)]):t._e()],1)};s._withStripped=!0;var c={render:s,staticRenderFns:[]},a=c;var n=!1;var l=i("VU/8")(o,a,!1,function(t){n||i("T2Xw")},null,null);l.options.__file="src/apps/comment/list/index.vue";e.default=l.exports}});